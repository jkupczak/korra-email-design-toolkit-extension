!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.emailRemoveUnusedCss=e()}(this,function(){"use strict";function t(t,e,n){if(e!=e)return function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,r,n);for(var o=n-1,i=t.length;++o<i;)if(t[o]===e)return o;return-1}function e(t,e,r,n){for(var o=r-1,i=t.length;++o<i;)if(n(t[o],e))return o;return-1}function r(t){return t!=t}var n=Array.prototype.splice;function o(r,o,i,a){var u,s=a?e:t,l=-1,c=o.length,f=r;for(r===o&&(o=function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(o)),i&&(f=function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(r,(u=i,function(t){return u(t)})));++l<c;)for(var y=0,h=o[l],d=i?i(h):h;(y=s(f,d,y,a))>-1;)f!==r&&n.call(f,y,1),n.call(r,y,1);return r}var i=function(t,e){return t&&t.length&&e&&e.length?o(t,e):t},a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(t,e){return t(e={exports:{}},e.exports),e.exports}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=200,c="__lodash_hash_undefined__",f="[object Function]",y="[object GeneratorFunction]",h=/^\[object .+?Constructor\]$/,d="object"==s(a)&&a&&a.Object===Object&&a,p="object"==("undefined"==typeof self?"undefined":s(self))&&self&&self.Object===Object&&self,g=d||p||Function("return this")();function m(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,v,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function b(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function v(t){return t!=t}function _(t,e){return t.has(e)}function w(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var O,S=Array.prototype,T=Function.prototype,I=Object.prototype,j=g["__core-js_shared__"],E=(O=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",A=T.toString,k=I.hasOwnProperty,W=I.toString,R=RegExp("^"+A.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=S.splice,H=F(g,"Map"),C=F(g,"Set"),D=F(Object,"create");function M(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function N(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function q(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function J(t){var e=-1,r=t?t.length:0;for(this.__data__=new q;++e<r;)this.add(t[e])}function P(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function B(t){return!(!Z(t)||E&&E in t)&&(function(t){var e=Z(t)?W.call(t):"";return e==f||e==y}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?R:h).test(function(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}M.prototype.clear=function(){this.__data__=D?D(null):{}},M.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},M.prototype.get=function(t){var e=this.__data__;if(D){var r=e[t];return r===c?void 0:r}return k.call(e,t)?e[t]:void 0},M.prototype.has=function(t){var e=this.__data__;return D?void 0!==e[t]:k.call(e,t)},M.prototype.set=function(t,e){return this.__data__[t]=D&&void 0===e?c:e,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(t){var e=this.__data__,r=P(e,t);return!(r<0||(r==e.length-1?e.pop():x.call(e,r,1),0))},N.prototype.get=function(t){var e=this.__data__,r=P(e,t);return r<0?void 0:e[r][1]},N.prototype.has=function(t){return P(this.__data__,t)>-1},N.prototype.set=function(t,e){var r=this.__data__,n=P(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},q.prototype.clear=function(){this.__data__={hash:new M,map:new(H||N),string:new M}},q.prototype.delete=function(t){return $(this,t).delete(t)},q.prototype.get=function(t){return $(this,t).get(t)},q.prototype.has=function(t){return $(this,t).has(t)},q.prototype.set=function(t,e){return $(this,t).set(t,e),this},J.prototype.add=J.prototype.push=function(t){return this.__data__.set(t,c),this},J.prototype.has=function(t){return this.__data__.has(t)};var L=C&&1/w(new C([,-0]))[1]==1/0?function(t){return new C(t)}:function(){};function $(t,e){var r,n,o=t.__data__;return("string"==(n=void 0===(r=e)?"undefined":s(r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function F(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return B(r)?r:void 0}function Z(t){var e=void 0===t?"undefined":s(t);return!!t&&("object"==e||"function"==e)}var V=function(t){return t&&t.length?function(t,e,r){var n=-1,o=m,i=t.length,a=!0,u=[],s=u;if(r)a=!1,o=b;else if(i>=l){var c=e?null:L(t);if(c)return w(c);a=!1,o=_,s=new J}else s=e?[]:u;t:for(;++n<i;){var f=t[n],y=e?e(f):f;if(f=r||0!==f?f:0,a&&y==y){for(var h=s.length;h--;)if(s[h]===y)continue t;e&&s.push(y),u.push(f)}else o(s,y,r)||(s!==u&&s.push(y),u.push(f))}return u}(t):[]},K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q="__lodash_hash_undefined__",U=9007199254740991,G="[object Function]",z="[object GeneratorFunction]",X=/^\[object .+?Constructor\]$/,Y="object"==K(a)&&a&&a.Object===Object&&a,tt="object"==("undefined"==typeof self?"undefined":K(self))&&self&&self.Object===Object&&self,et=Y||tt||Function("return this")();function rt(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,it,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function nt(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function ot(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function it(t){return t!=t}function at(t){return function(e){return t(e)}}function ut(t,e){return t.has(e)}var st,lt,ct=Array.prototype,ft=Function.prototype,yt=Object.prototype,ht=et["__core-js_shared__"],dt=function(){var t=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pt=ft.toString,gt=yt.hasOwnProperty,mt=yt.toString,bt=RegExp("^"+pt.call(gt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=ct.splice,_t=Math.max,wt=Math.min,Ot=xt(et,"Map"),St=xt(Object,"create");function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function It(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Et(t){var e=-1,r=t?t.length:0;for(this.__data__=new jt;++e<r;)this.add(t[e])}function At(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function kt(t){return!(!Ct(t)||dt&&dt in t)&&(Ht(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?bt:X).test(function(t){if(null!=t){try{return pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function Wt(t){return function(t){return function(t){return!!t&&"object"==(void 0===t?"undefined":K(t))}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=U}(t.length)&&!Ht(t)}(t)}(t)?t:[]}function Rt(t,e){var r,n,o=t.__data__;return("string"==(n=void 0===(r=e)?"undefined":K(r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function xt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return kt(r)?r:void 0}function Ht(t){var e=Ct(t)?mt.call(t):"";return e==G||e==z}function Ct(t){var e=void 0===t?"undefined":K(t);return!!t&&("object"==e||"function"==e)}Tt.prototype.clear=function(){this.__data__=St?St(null):{}},Tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Tt.prototype.get=function(t){var e=this.__data__;if(St){var r=e[t];return r===Q?void 0:r}return gt.call(e,t)?e[t]:void 0},Tt.prototype.has=function(t){var e=this.__data__;return St?void 0!==e[t]:gt.call(e,t)},Tt.prototype.set=function(t,e){return this.__data__[t]=St&&void 0===e?Q:e,this},It.prototype.clear=function(){this.__data__=[]},It.prototype.delete=function(t){var e=this.__data__,r=At(e,t);return!(r<0||(r==e.length-1?e.pop():vt.call(e,r,1),0))},It.prototype.get=function(t){var e=this.__data__,r=At(e,t);return r<0?void 0:e[r][1]},It.prototype.has=function(t){return At(this.__data__,t)>-1},It.prototype.set=function(t,e){var r=this.__data__,n=At(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},jt.prototype.clear=function(){this.__data__={hash:new Tt,map:new(Ot||It),string:new Tt}},jt.prototype.delete=function(t){return Rt(this,t).delete(t)},jt.prototype.get=function(t){return Rt(this,t).get(t)},jt.prototype.has=function(t){return Rt(this,t).has(t)},jt.prototype.set=function(t,e){return Rt(this,t).set(t,e),this},Et.prototype.add=Et.prototype.push=function(t){return this.__data__.set(t,Q),this},Et.prototype.has=function(t){return this.__data__.has(t)};var Dt=(st=function(t){var e=ot(t,Wt);return e.length&&e[0]===t[0]?function(t,e,r){for(var n=r?nt:rt,o=t[0].length,i=t.length,a=i,u=Array(i),s=1/0,l=[];a--;){var c=t[a];a&&e&&(c=ot(c,at(e))),s=wt(c.length,s),u[a]=!r&&(e||o>=120&&c.length>=120)?new Et(a&&c):void 0}c=t[0];var f=-1,y=u[0];t:for(;++f<o&&l.length<s;){var h=c[f],d=e?e(h):h;if(h=r||0!==h?h:0,!(y?ut(y,d):n(l,d,r))){for(a=i;--a;){var p=u[a];if(!(p?ut(p,d):n(t[a],d,r)))continue t}y&&y.push(d),l.push(h)}}return l}(e):[]},lt=_t(void 0===lt?st.length-1:lt,0),function(){for(var t=arguments,e=-1,r=_t(t.length-lt,0),n=Array(r);++e<r;)n[e]=t[lt+e];e=-1;for(var o=Array(lt+1);++e<lt;)o[e]=t[e];return o[lt]=n,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(st,this,o)}),Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt=1/0,qt="[object Symbol]",Jt="object"==Mt(a)&&a&&a.Object===Object&&a,Pt="object"==("undefined"==typeof self?"undefined":Mt(self))&&self&&self.Object===Object&&self,Bt=Jt||Pt||Function("return this")(),Lt=Object.prototype.toString,$t=Bt.Symbol,Ft=$t?$t.prototype:void 0,Zt=Ft?Ft.toString:void 0;function Vt(t){if("string"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":Mt(t))||function(t){return!!t&&"object"==(void 0===t?"undefined":Mt(t))}(t)&&Lt.call(t)==qt}(t))return Zt?Zt.call(t):"";var e=t+"";return"0"==e&&1/t==-Nt?"-0":e}var Kt=function(){var t,e=arguments,r=null==(t=e[0])?"":Vt(t);return e.length<3?r:r.replace(e[1],e[2])},Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut=200,Gt="__lodash_hash_undefined__",zt=9007199254740991,Xt="[object Function]",Yt="[object GeneratorFunction]",te=/^\[object .+?Constructor\]$/,ee="object"==Qt(a)&&a&&a.Object===Object&&a,re="object"==("undefined"==typeof self?"undefined":Qt(self))&&self&&self.Object===Object&&self,ne=ee||re||Function("return this")();function oe(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,ae,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function ie(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function ae(t){return t!=t}function ue(t,e){return t.has(e)}var se=Array.prototype,le=Function.prototype,ce=Object.prototype,fe=ne["__core-js_shared__"],ye=function(){var t=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),he=le.toString,de=ce.hasOwnProperty,pe=ce.toString,ge=RegExp("^"+he.call(de).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=se.splice,be=Math.max,ve=ke(ne,"Map"),_e=ke(Object,"create");function we(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Oe(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Se(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Te(t){var e=-1,r=t?t.length:0;for(this.__data__=new Se;++e<r;)this.add(t[e])}function Ie(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function je(t,e,r,n){var o,i=-1,a=oe,u=!0,s=t.length,l=[],c=e.length;if(!s)return l;r&&(e=function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,(o=r,function(t){return o(t)}))),n?(a=ie,u=!1):e.length>=Ut&&(a=ue,u=!1,e=new Te(e));t:for(;++i<s;){var f=t[i],y=r?r(f):f;if(f=n||0!==f?f:0,u&&y==y){for(var h=c;h--;)if(e[h]===y)continue t;l.push(f)}else a(e,y,n)||l.push(f)}return l}function Ee(t){return!(!Re(t)||ye&&ye in t)&&(We(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?ge:te).test(function(t){if(null!=t){try{return he.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function Ae(t,e){var r,n,o=t.__data__;return("string"==(n=void 0===(r=e)?"undefined":Qt(r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function ke(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Ee(r)?r:void 0}function We(t){var e=Re(t)?pe.call(t):"";return e==Xt||e==Yt}function Re(t){var e=void 0===t?"undefined":Qt(t);return!!t&&("object"==e||"function"==e)}we.prototype.clear=function(){this.__data__=_e?_e(null):{}},we.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},we.prototype.get=function(t){var e=this.__data__;if(_e){var r=e[t];return r===Gt?void 0:r}return de.call(e,t)?e[t]:void 0},we.prototype.has=function(t){var e=this.__data__;return _e?void 0!==e[t]:de.call(e,t)},we.prototype.set=function(t,e){return this.__data__[t]=_e&&void 0===e?Gt:e,this},Oe.prototype.clear=function(){this.__data__=[]},Oe.prototype.delete=function(t){var e=this.__data__,r=Ie(e,t);return!(r<0||(r==e.length-1?e.pop():me.call(e,r,1),0))},Oe.prototype.get=function(t){var e=this.__data__,r=Ie(e,t);return r<0?void 0:e[r][1]},Oe.prototype.has=function(t){return Ie(this.__data__,t)>-1},Oe.prototype.set=function(t,e){var r=this.__data__,n=Ie(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Se.prototype.clear=function(){this.__data__={hash:new we,map:new(ve||Oe),string:new we}},Se.prototype.delete=function(t){return Ae(this,t).delete(t)},Se.prototype.get=function(t){return Ae(this,t).get(t)},Se.prototype.has=function(t){return Ae(this,t).has(t)},Se.prototype.set=function(t,e){return Ae(this,t).set(t,e),this},Te.prototype.add=Te.prototype.push=function(t){return this.__data__.set(t,Gt),this},Te.prototype.has=function(t){return this.__data__.has(t)};var xe=function(t,e){return e=be(void 0===e?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=be(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}(function(t,e){return function(t){return!!t&&"object"==(void 0===t?"undefined":Qt(t))}(r=t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=zt}(t.length)&&!We(t)}(r)?je(t,e):[];var r}),He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce=1/0,De=9007199254740991,Me="[object Arguments]",Ne="[object Function]",qe="[object GeneratorFunction]",Je="object"==He(a)&&a&&a.Object===Object&&a,Pe="object"==("undefined"==typeof self?"undefined":He(self))&&self&&self.Object===Object&&self,Be=Je||Pe||Function("return this")();function Le(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var $e=Object.prototype,Fe=$e.hasOwnProperty,Ze=$e.toString,Ve=Be.Symbol,Ke=$e.propertyIsEnumerable,Qe=Ve?Ve.isConcatSpreadable:void 0;function Ue(t){return Ge(t)||function(t){return function(t){return function(t){return!!t&&"object"==(void 0===t?"undefined":He(t))}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=De}(t.length)&&!function(t){var e=function(t){var e=void 0===t?"undefined":He(t);return!!t&&("object"==e||"function"==e)}(t)?Ze.call(t):"";return e==Ne||e==qe}(t)}(t)}(t)&&Fe.call(t,"callee")&&(!Ke.call(t,"callee")||Ze.call(t)==Me)}(t)||!!(Qe&&t&&t[Qe])}var Ge=Array.isArray;var ze=function(t){return t&&t.length?function t(e,r,n,o,i){var a=-1,u=e.length;for(n||(n=Ue),i||(i=[]);++a<u;){var s=e[a];r>0&&n(s)?r>1?t(s,r-1,n,o,i):Le(i,s):o||(i[i.length]=s)}return i}(t,Ce):[]};function Xe(t){if(void 0===t)throw new Error;var e=t.replace(/[\0'"\\\n\r\v\t\b\f]/g," ").split(/([.#])/);return e.forEach(function(t,r){"."!==t&&"#"!==t||(null!=e[r+1]&&(e[r+1]=t+e[r+1]),e[r]="")}),e.forEach(function(t,r){var n;e[r]=xe(function(t){return Kt(t,/[ ~\\!@$%^&*()+=,/';:"?><[\]\\{}|`].*/g,"")}((n=e[r],Kt(n,/[^.#]*/m,""))).split(/([.#][^.#]*)/),"")}),e=ze(e),e=xe(e,".","#")}var Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tr="[object Object]";var er=Function.prototype,rr=Object.prototype,nr=er.toString,or=rr.hasOwnProperty,ir=nr.call(Object),ar=rr.toString,ur=function(t,e){return function(r){return t(e(r))}}(Object.getPrototypeOf,Object);var sr=function(t){if(!function(t){return!!t&&"object"==(void 0===t?"undefined":Ye(t))}(t)||ar.call(t)!=tr||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e=ur(t);if(null===e)return!0;var r=or.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&nr.call(r)==ir},lr=/[|\\{}()[\]^$+*?.]/g,cr=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(lr,"\\$&")},fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr=u(function(t){var e=new Map;function r(t,r){var n=t+r;if(e.has(n))return e.get(n);var o=!1;"!"===t[0]&&(o=!0,t=t.slice(1)),t=cr(t).replace(/\\\*/g,".*"),o&&r&&(t="(?!"+t+")");var i=new RegExp("^"+t+"$","i");return i.negated=o,e.set(n,i),i}t.exports=function(t,e){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Expected two arrays, got "+(void 0===t?"undefined":fr(t))+" "+(void 0===e?"undefined":fr(e)));if(0===e.length)return t;var n="!"===e[0][0];e=e.map(function(t){return r(t,!1)});var o=[],i=!0,a=!1,u=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){for(var c=s.value,f=n,y=0;y<e.length;y++)e[y].test(c)&&(f=!e[y].negated);f&&o.push(c)}}catch(t){a=!0,u=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw u}}return o},t.exports.isMatch=function(t,e){return r(e,!0).test(t)}}),hr=(yr.isMatch,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),dr="function"==typeof Symbol&&"symbol"===hr(Symbol.iterator)?function(t){return void 0===t?"undefined":hr(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":hr(t)},pr=Array.isArray;function gr(t,e){function r(t){return null!=t}function n(t){return"string"==typeof t}if(!r(t))throw new Error("array-pull-all-with-glob: [THROW_ID_01] first argument is missing!");if(!r(e))throw new Error("array-pull-all-with-glob: [THROW_ID_02] second argument is missing!");if(!pr(t))throw new Error("array-pull-all-with-glob: [THROW_ID_03] first argument must be an array! Currently it's "+(void 0===t?"undefined":dr(t))+", equal to: "+JSON.stringify(t,null,4));if(!pr(e))throw new Error("array-pull-all-with-glob: [THROW_ID_04] first argument must be an array! Currently it's "+(void 0===e?"undefined":dr(e))+", equal to: "+JSON.stringify(e,null,4));if(0===t.length||0===e.length)return t;if(!t.every(function(t){return n(t)}))throw new Error("array-pull-all-with-glob: [THROW_ID_05] first argument array contains non-string elements: "+JSON.stringify(t,null,4));if(!e.every(function(t){return n(t)}))throw new Error("array-pull-all-with-glob: [THROW_ID_06] first argument array contains non-string elements: "+JSON.stringify(e,null,4));return Array.from(t).filter(function(t){return!e.some(function(e){return yr.isMatch(t,e)})})}var mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br=function(t,e){if(e){if("object"!==(void 0===e?"undefined":mr(e)))throw new TypeError(String(e)+" is not an object. Expected an object that has boolean `includeZero` property.");if("includeZero"in e){if("boolean"!=typeof e.includeZero)throw new TypeError(String(e.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(e.includeZero&&0===t)return!0}}return Number.isSafeInteger(t)&&t>=1},vr=function(t,e){if("string"!=typeof t)return!1;if(e&&"includeZero"in e){if("boolean"!=typeof e.includeZero)throw new TypeError(String(e.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(e.includeZero)return/^(-?0|[1-9]\d*)(\.0+)?$/.test(t)}return/^[1-9]\d*(\.0+)?$/.test(t)},_r=u(function(t,e){(e=t.exports=function(t){return t+e.suffix(+t)}).suffix=function(t){return 1===Math.floor(t/10)?"th":t%10==1?"st":t%10==2?"nd":t%10==3?"rd":"th"}}),wr=(_r.suffix,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),Or=u(function(t,e){var r,n,o,i,u,s,l,c,f,y,h,d,p,g,m,b,v,_,w,O;t.exports=(r="function"==typeof Promise,n="object"===("undefined"==typeof self?"undefined":wr(self))?self:a,o="undefined"!=typeof Symbol,i="undefined"!=typeof Map,u="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,l="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,f=o&&void 0!==Symbol.iterator,y=o&&void 0!==Symbol.toStringTag,h=u&&"function"==typeof Set.prototype.entries,d=i&&"function"==typeof Map.prototype.entries,p=h&&Object.getPrototypeOf((new Set).entries()),g=d&&Object.getPrototypeOf((new Map).entries()),m=f&&"function"==typeof Array.prototype[Symbol.iterator],b=m&&Object.getPrototypeOf([][Symbol.iterator]()),v=f&&"function"==typeof String.prototype[Symbol.iterator],_=v&&Object.getPrototypeOf(""[Symbol.iterator]()),w=8,O=-1,function(t){var e=void 0===t?"undefined":wr(t);if("object"!==e)return e;if(null===t)return"null";if(t===n)return"global";if(Array.isArray(t)&&(!1===y||!(Symbol.toStringTag in t)))return"Array";if("object"===("undefined"==typeof window?"undefined":wr(window))){if("object"===wr(window.location)&&t===window.location)return"Location";if("object"===wr(window.document)&&t===window.document)return"Document";if("object"===wr(window.navigator)){if("object"===wr(window.navigator.mimeTypes)&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"===wr(window.navigator.plugins)&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"===wr(window.HTMLElement))&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var o=y&&t[Symbol.toStringTag];if("string"==typeof o)return o;var a=Object.getPrototypeOf(t);return a===RegExp.prototype?"RegExp":a===Date.prototype?"Date":r&&a===Promise.prototype?"Promise":u&&a===Set.prototype?"Set":i&&a===Map.prototype?"Map":l&&a===WeakSet.prototype?"WeakSet":s&&a===WeakMap.prototype?"WeakMap":c&&a===DataView.prototype?"DataView":i&&a===g?"Map Iterator":u&&a===p?"Set Iterator":m&&a===b?"Array Iterator":v&&a===_?"String Iterator":null===a?"Object":Object.prototype.toString.call(t).slice(w,O)})}),Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr=1/0,Ir=9007199254740991,jr=1.7976931348623157e308,Er=NaN,Ar="[object Arguments]",kr="[object Function]",Wr="[object GeneratorFunction]",Rr="[object String]",xr="[object Symbol]",Hr=/^\s+|\s+$/g,Cr=/^[-+]0x[0-9a-f]+$/i,Dr=/^0b[01]+$/i,Mr=/^0o[0-7]+$/i,Nr=/^(?:0|[1-9]\d*)$/,qr=parseInt;function Jr(t){return t!=t}function Pr(t,e){return function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,function(e){return t[e]})}var Br=Object.prototype,Lr=Br.hasOwnProperty,$r=Br.toString,Fr=Br.propertyIsEnumerable,Zr=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),Vr=Math.max;function Kr(t,e){var r=Gr(t)||function(t){return function(t){return Yr(t)&&zr(t)}(t)&&Lr.call(t,"callee")&&(!Fr.call(t,"callee")||$r.call(t)==Ar)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!Lr.call(t,i)||o&&("length"==i||Ur(i,n))||r.push(i);return r}function Qr(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||Br,e!==n)return Zr(t);var e,r,n,o=[];for(var i in Object(t))Lr.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Ur(t,e){return!!(e=null==e?Ir:e)&&("number"==typeof t||Nr.test(t))&&t>-1&&t%1==0&&t<e}var Gr=Array.isArray;function zr(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ir}(t.length)&&!function(t){var e=Xr(t)?$r.call(t):"";return e==kr||e==Wr}(t)}function Xr(t){var e=void 0===t?"undefined":Sr(t);return!!t&&("object"==e||"function"==e)}function Yr(t){return!!t&&"object"==(void 0===t?"undefined":Sr(t))}var tn=function(t,e,r,n){var o;t=zr(t)?t:(o=t)?Pr(o,function(t){return zr(t)?Kr(t):Qr(t)}(o)):[],r=r&&!n?function(t){var e=function(t){if(!t)return 0===t?t:0;if((t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":Sr(t))||Yr(t)&&$r.call(t)==xr}(t))return Er;if(Xr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Xr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Hr,"");var r=Dr.test(t);return r||Mr.test(t)?qr(t.slice(2),r?2:8):Cr.test(t)?Er:+t}(t))===Tr||t===-Tr){var e=t<0?-1:1;return e*jr}return t==t?t:0}(t),r=e%1;return e==e?r?e-r:e:0}(r):0;var i=t.length;return r<0&&(r=Vr(i+r,0)),function(t){return"string"==typeof t||!Gr(t)&&Yr(t)&&$r.call(t)==Rr}(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&function(t,e,r){if(e!=e)return function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,Jr,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r)>-1};function en(t){return"string"==typeof t?t.length>0?[t]:[]:t}function rn(t,e,r){function n(t){return null!=t}function o(t){return"boolean"===Or(t)}function a(t){return"string"===Or(t)}function u(t){return"Object"===Or(t)}var s=["any","anything","every","everything","all","whatever","whatevs"],l=Array.isArray;if(0===arguments.length)throw new Error("check-types-mini/checkTypes(): Missing all arguments!");if(1===arguments.length)throw new Error("check-types-mini/checkTypes(): Missing second argument!");var c=u(e)?e:{},f={ignoreKeys:[],acceptArrays:!1,acceptArraysIgnore:[],enforceStrictKeyset:!0,schema:{},msg:"check-types-mini/checkTypes()",optsVarName:"opts"},y=void 0;if(!a((y=n(r)&&u(r)?Object.assign({},f,r):Object.assign({},f)).msg))throw new Error("check-types-mini/checkTypes(): opts.msg must be string! Currently it's: "+Or(y.msg)+", equal to "+JSON.stringify(y.msg,null,4));if(y.msg=y.msg.trim(),":"===y.msg[y.msg.length-1]&&(y.msg=y.msg.slice(0,y.msg.length-1)),!a(y.optsVarName))throw new Error("check-types-mini/checkTypes(): opts.optsVarName must be string! Currently it's: "+Or(y.optsVarName)+", equal to "+JSON.stringify(y.optsVarName,null,4));if(y.ignoreKeys=en(y.ignoreKeys),y.acceptArraysIgnore=en(y.acceptArraysIgnore),!l(y.ignoreKeys))throw new TypeError("check-types-mini/checkTypes(): opts.ignoreKeys should be an array, currently it's: "+Or(y.ignoreKeys));if(!o(y.acceptArrays))throw new TypeError("check-types-mini/checkTypes(): opts.acceptArrays should be a Boolean, currently it's: "+Or(y.acceptArrays));if(!l(y.acceptArraysIgnore))throw new TypeError("check-types-mini/checkTypes(): opts.acceptArraysIgnore should be an array, currently it's: "+Or(y.acceptArraysIgnore));if(!o(y.enforceStrictKeyset))throw new TypeError("check-types-mini/checkTypes(): opts.enforceStrictKeyset should be a Boolean, currently it's: "+Or(y.enforceStrictKeyset));if(Object.keys(y.schema).forEach(function(t){l(y.schema[t])||(y.schema[t]=[y.schema[t]]),y.schema[t]=y.schema[t].map(String).map(function(t){return t.toLowerCase()}).map(function(t){return t.trim()})}),y.enforceStrictKeyset)if(n(y.schema)&&Object.keys(y.schema).length>0){if(0!==i(Object.keys(t),Object.keys(c).concat(Object.keys(y.schema))).length)throw new TypeError(y.msg+": "+y.optsVarName+".enforceStrictKeyset is on and the following keys are not covered by schema and/or reference objects: "+JSON.stringify(i(Object.keys(t),Object.keys(c).concat(Object.keys(y.schema))),null,4))}else{if(!(n(c)&&Object.keys(c).length>0))throw new TypeError(y.msg+": Both "+y.optsVarName+".schema and reference objects are missing! We don't have anything to match the keys as you requested via opts.enforceStrictKeyset!");if(0!==i(Object.keys(t),Object.keys(c)).length)throw new TypeError(y.msg+": The input object has keys that are not covered by reference object: "+JSON.stringify(i(Object.keys(t),Object.keys(c)),null,4));if(0!==i(Object.keys(c),Object.keys(t)).length)throw new TypeError(y.msg+": The reference object has keys that are not present in the input object: "+JSON.stringify(i(Object.keys(c),Object.keys(t)),null,4))}Object.keys(t).forEach(function(e){if(n(y.schema)&&Object.prototype.hasOwnProperty.call(y.schema,e)){if(y.schema[e]=en(y.schema[e]).map(String).map(function(t){return t.toLowerCase()}),!Dt(y.schema[e],s).length&&!tn(y.schema[e],Or(t[e]).toLowerCase())){if(!l(t[e])||!y.acceptArrays)throw new TypeError(y.msg+": "+y.optsVarName+"."+e+" was customised to "+JSON.stringify(t[e],null,4)+" which is not among the allowed types in schema ("+y.schema[e]+") but "+Or(t[e]));for(var r=0,o=t[e].length;r<o;r++)if(!tn(y.schema[e],Or(t[e][r]).toLowerCase()))throw new TypeError(y.msg+": "+y.optsVarName+"."+e+" is of type "+Or(t[e][r]).toLowerCase()+", but only the following are allowed in "+y.optsVarName+".schema: "+y.schema[e])}}else if(n(c)&&Object.prototype.hasOwnProperty.call(c,e)&&Or(t[e])!==Or(c[e])&&!tn(y.ignoreKeys,e)){if(!y.acceptArrays||!l(t[e])||tn(y.acceptArraysIgnore,e))throw new TypeError(y.msg+": "+y.optsVarName+"."+e+" was customised to "+JSON.stringify(t[e],null,4)+" which is not "+Or(c[e])+" but "+Or(t[e]));if(!t[e].every(function(t){return Or(t)===Or(c[e])}))throw new TypeError(y.msg+": "+y.optsVarName+"."+e+" was customised to be array, but not all of its elements are "+Or(c[e])+"-type")}})}var nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on="function"==typeof Symbol&&"symbol"===nn(Symbol.iterator)?function(t){return void 0===t?"undefined":nn(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":nn(t)},an=Array.isArray;function un(t,e){if(!an(t))throw new TypeError("ranges-sort: [THROW_ID_01] Input must be an array, consisting of range arrays! Currently its type is: "+(void 0===t?"undefined":on(t))+", equal to: "+JSON.stringify(t,null,4));if(0===t.length)return t;var r={strictlyTwoElementsInRangeArrays:!1},n=Object.assign({},r,e);rn(n,r,{msg:"ranges-sort: [THROW_ID_02*]"});var o=void 0,i=void 0;if(n.strictlyTwoElementsInRangeArrays&&!t.every(function(t,e){return 2===t.length||(o=e,i=t.length,!1)}))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, "+_r(o)+" range ("+JSON.stringify(t[o],null,4)+") has not two but "+i+" elements!");if(!t.every(function(t,e){return!(!br(t[0],{includeZero:!0})||!br(t[1],{includeZero:!0}))||(o=e,!1)}))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, "+_r(o)+" range ("+JSON.stringify(t[o],null,4)+") does not consist of only natural numbers!");return Array.from(t).sort(function(t,e){return t[0]===e[0]?t[1]<e[1]?-1:t[1]>e[1]?1:0:t[0]<e[0]?-1:1})}function sn(t){if("string"==typeof t){if(0===t.length)return"";if(""===t.trim())return t.includes("\n")?"\n":" ";var e="";if(""===t[0].trim()){e=" ";for(var r=!1,n=0,o=t.length;n<o&&("\n"===t[n]&&(r=!0),""===t[n].trim());n++);r&&(e="\n")}var i="";if(""===t.slice(-1).trim()){i=" ";for(var a=!1,u=t.length;u--&&("\n"===t[u]&&(a=!0),""===t[u].trim()););a&&(i="\n")}return e+t.trim()+i}return t}var ln=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function cn(t){return null!=t}function fn(t){throw new Error("string-slices-array-push/Slices/add(): [THROW_ID_01] Missing "+t+_r(t)+" parameter!")}var yn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r={limitToBeAddedWhitespace:!1},n=Object.assign({},r,e);rn(n,r,{msg:"string-slices-array-push: [THROW_ID_00*]"}),this.opts=n}return ln(t,[{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn(1),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fn(2),r=arguments[2],n=vr(t)?parseInt(t,10):t,o=vr(e)?parseInt(e,10):e;if(!br(n,{includeZero:!0}))throw new TypeError('string-slices-array-push/Slices/add(): [THROW_ID_02] "from" value, first input argument, must be a natural number or zero! Currently it\'s equal to: '+JSON.stringify(n,null,4));if(!br(o,{includeZero:!0}))throw new TypeError('string-slices-array-push/Slices/add(): [THROW_ID_03] "to" value, second input argument, must be a natural number! Currently it\'s equal to: '+JSON.stringify(o,null,4));if(cn(r)&&"string"!=typeof r&&null!==r)throw new TypeError('string-slices-array-push/Slices/add(): [THROW_ID_04] "addVal" value, third input argument, must be a string (or null)! Currently it\'s equal to: '+JSON.stringify(r,null,4));for(var i=arguments.length,a=Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];if(a.length>0)throw new TypeError("string-slices-array-push/Slices/add(): [THROW_ID_05] Please don't overload the add() method. From the 4th input argument onwards we see these redundant arguments: "+JSON.stringify(a,null,4));if(void 0!==this.slices&&n===this.last()[1]){if(this.last()[1]=o,null!==this.last()[2]&&cn(r)){var s=cn(this.last()[2])&&this.last()[2].length>0?this.last()[2]+r:r;this.opts.limitToBeAddedWhitespace&&(s=sn(s)),this.last()[2]=s}}else this.slices||(this.slices=[]),this.slices.push(void 0!==r?[n,o,this.opts.limitToBeAddedWhitespace?sn(r):r]:[n,o])}},{key:"push",value:function(t,e,r){for(var n=arguments.length,o=Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];this.add.apply(this,[t,e,r].concat(o))}},{key:"current",value:function(){return null!=this.slices?(this.slices=function(t){if(!Array.isArray(t))return t;for(var e=un(t),r=e.length-1;r>0;r--)(e[r][0]<=e[r-1][0]||e[r][0]<=e[r-1][1])&&(e[r-1][0]=Math.min(e[r][0],e[r-1][0]),e[r-1][1]=Math.max(e[r][1],e[r-1][1]),void 0!==e[r][2]&&(e[r-1][0]>=e[r][0]||e[r-1][1]<=e[r][1])&&null!==e[r-1][2]&&(null===e[r][2]&&null!==e[r-1][2]?e[r-1][2]=null:void 0!==e[r-1][2]?e[r-1][2]+=e[r][2]:e[r-1][2]=e[r][2]),e.splice(r,1),r=e.length);return e}(this.slices),this.opts.limitToBeAddedWhitespace?this.slices.map(function(t){return cn(t[2])?[t[0],t[1],sn(t[2])]:t}):this.slices):null}},{key:"wipe",value:function(){this.slices=void 0}},{key:"last",value:function(){return void 0!==this.slices&&Array.isArray(this.slices)?this.slices[this.slices.length-1]:null}}]),t}();var hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn="function"==typeof Symbol&&"symbol"===hn(Symbol.iterator)?function(t){return void 0===t?"undefined":hn(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":hn(t)};function pn(t){return"string"==typeof t}function gn(t,e,r,n){if(!(e<=t.length)){if(n.strictApi)throw new Error("string-match-left-right/marchForward(): [THROW_ID_102] second argument, fromIndexInclusive is "+e+" beyond the input string length, "+t.length+".");return!1}for(var o=r.length,i=e,a=t.length;i<a;i++)if(!(n.trimBeforeMatching&&""===t[i].trim()||!n.i&&n.trimCharsBeforeMatching.includes(t[i])||n.i&&n.trimCharsBeforeMatching.map(function(t){return t.toLowerCase()}).includes(t[i].toLowerCase()))){if(!(!n.i&&t[i]===r[r.length-o]||n.i&&t[i].toLowerCase()===r[r.length-o].toLowerCase()))return!1;if(0===(o-=1))return i-r.length+1}if(o>0)return!1}function mn(t,e,r,n){if(e>=t.length){if(n.strictApi)throw new Error("string-match-left-right/marchBackward(): [THROW_ID_203] second argument, starting index, should not be beyond the last character of the input string! Currently the first argument's last character's index is "+t.length+" but the second argument is beyond it:\n"+JSON.stringify(e,null,4));return!1}for(var o=r.length,i=e+1;i--;)if(!(n.trimBeforeMatching&&""===t[i].trim()||!n.i&&n.trimCharsBeforeMatching.includes(t[i])||n.i&&n.trimCharsBeforeMatching.map(function(t){return t.toLowerCase()}).includes(t[i].toLowerCase()))){if(!(!n.i&&t[i]===r[o-1]||n.i&&t[i].toLowerCase()===r[o-1].toLowerCase()))return!1;if(0===(o-=1))return i}if(o>0)return!1}function bn(t,e,r,n,o){function i(t){return null!=t}var a=Array.isArray;if(!pn(e))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_01] the first argument should be a string. Currently it's of a type: "+(void 0===e?"undefined":dn(e))+", equal to:\n"+JSON.stringify(e,null,4));if(0===e.length)throw new Error("string-match-left-right/"+t+"(): [THROW_ID_02] the first argument should be a non-empty string. Currently it's empty!");if(!br(r,{includeZero:!0}))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: "+(void 0===r?"undefined":dn(r))+", equal to:\n"+JSON.stringify(r,null,4));var u=void 0;if(!i(n))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_04] Third argument, whatToMatch, is missing!");if(pn(n))u=[n];else{if(!a(n))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's "+(void 0===n?"undefined":dn(n))+", equal to:\n"+JSON.stringify(n,null,4));u=n}if(i(o)&&!sr(o))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \""+(void 0===o?"undefined":dn(o))+'", and equal to:\n'+JSON.stringify(o,null,4));var s={i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],strictApi:!0},l=Object.assign({},s,o);l.trimCharsBeforeMatching=en(l.trimCharsBeforeMatching),rn(l,s,{msg:"string-match-left-right: [THROW_ID_07*]",schema:{cb:["null","undefined","function"]}}),l.trimCharsBeforeMatching=l.trimCharsBeforeMatching.map(function(t){return pn(t)?t:String(t)});var c=void 0,f=void 0;if(l.trimCharsBeforeMatching.some(function(t,e){return t.length>1&&(c=e,f=t,!0)}))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index "+c+" is longer than 1 character, "+f.length+" (equals to "+f+"). Please split it into separate characters and put into array as separate elements.");if(t.startsWith("matchLeft")){for(var y=0,h=u.length;y<h;y++){var d=mn(e,r-("matchLeft"===t?1:0),u[y],l);if(!1!==d&&(!l.cb||l.cb(e[d-1],e.slice(0,d),d-1)))return u[y]}return!1}for(var p=0,g=u.length;p<g;p++){var m=gn(e,r+("matchRight"===t?1:0),u[p],l);if(!1!==m&&(!l.cb||l.cb(e[m+u[p].length],e.slice(m+u[p].length),m+u[p].length)))return u[p]}return!1}function vn(t,e,r,n){return bn("matchLeftIncl",t,e,r,n)}function _n(t,e,r,n){return bn("matchRightIncl",t,e,r,n)}var wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On="function"==typeof Symbol&&"symbol"===wn(Symbol.iterator)?function(t){return void 0===t?"undefined":wn(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":wn(t)};function Sn(t){return"string"==typeof t}var Tn=Array.isArray;function In(t){throw new Error("string-find-heads-tails: [THROW_ID_01*] Missing "+_r(t)+" parameter!")}function jn(t,e,r,n){if(null!=n){if(!sr(n))throw new TypeError("string-find-heads-tails: [THROW_ID_13] the fourth input argument, Optional Options Object, must be a plain object! Currently it's: "+(void 0===n?"undefined":On(n))+", equal to: "+n);vr(n.fromIndex,{includeZero:!0})&&(n.fromIndex=Number(n.fromIndex))}var o={fromIndex:0,throwWhenSomethingWrongIsDetected:!0,allowWholeValueToBeOnlyHeadsOrTails:!0,source:"string-find-heads-tails",matchHeadsAndTailsStrictlyInPairsByTheirOrder:!1,relaxedAPI:!1};if(rn(n=Object.assign({},o,n),o,{msg:"string-find-heads-tails: [THROW_ID_14*]"}),n.relaxedAPI||(void 0===t&&In(1),void 0===e&&In(2),void 0===r&&In(3)),!Sn(t)||0===t.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_02] the first input argument, input string, must be a non-zero-length string! Currently it's: "+(void 0===t?"undefined":On(t))+", equal to: "+t)}var i=void 0,a=void 0;if(!Sn(e)&&!Tn(e)){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_03] the second input argument, heads, must be either a string or an array of strings! Currently it's: "+(void 0===e?"undefined":On(e))+", equal to:\n"+JSON.stringify(e,null,4))}if(Sn(e)){if(0===e.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_04] the second input argument, heads, must be a non-empty string! Currently it's empty.")}e=en(e)}else if(Tn(e)){if(0===e.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_05] the second input argument, heads, must be a non-empty array and contain at least one string! Currently it's empty.")}if(e.every(function(t,e){return i=t,a=e,Sn(t)})){if(!e.every(function(t,e){return a=e,Sn(t)&&t.length>0&&""!==t.trim()})){if(!n.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_07] the second input argument, heads, should not contain empty strings! For example, there's one detected at index "+a+" of heads array:\n"+JSON.stringify(e,null,4)+".");if(0===(e=e.filter(function(t){return Sn(t)&&t.length>0})).length)return[]}}else{if(!n.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_06] the second input argument, heads, contains non-string elements! For example, element at "+_r(a)+" index is "+(void 0===i?"undefined":On(i))+", equal to:\n"+JSON.stringify(i,null,4)+". Whole heads array looks like:\n"+JSON.stringify(e,null,4));if(0===(e=e.filter(function(t){return Sn(t)&&t.length>0})).length)return[]}}if(!Sn(r)&&!Tn(r)){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_08] the third input argument, tails, must be either a string or an array of strings! Currently it's: "+(void 0===r?"undefined":On(r))+", equal to:\n"+JSON.stringify(r,null,4))}if(Sn(r)){if(0===r.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_09] the third input argument, tails, must be a non-empty string! Currently it's empty.")}r=en(r)}else if(Tn(r)){if(0===r.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_10] the third input argument, tails, must be a non-empty array and contain at least one string! Currently it's empty.")}if(r.every(function(t,e){return i=t,a=e,Sn(t)})){if(!r.every(function(t,e){return a=e,Sn(t)&&t.length>0&&""!==t.trim()})){if(!n.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_12] the third input argument, tails, should not contain empty strings! For example, there's one detected at index "+a+". Whole tails array is equal to:\n"+JSON.stringify(r,null,4));if(0===(r=r.filter(function(t){return Sn(t)&&t.length>0})).length)return[]}}else{if(!n.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_11] the third input argument, tails, contains non-string elements! For example, element at "+_r(a)+" index is "+(void 0===i?"undefined":On(i))+", equal to:\n"+JSON.stringify(i,null,4)+". Whole tails array is equal to:\n"+JSON.stringify(r,null,4));if(0===(r=r.filter(function(t){return Sn(t)&&t.length>0})).length)return[]}}var u=n.source===o.source;if(n.throwWhenSomethingWrongIsDetected&&!n.allowWholeValueToBeOnlyHeadsOrTails){if(tn(en(e),t))throw new Error(n.source+(u?": [THROW_ID_16]":"")+" the whole input string can't be equal to "+(Sn(e)?"":"one of ")+"heads ("+t+")!");if(tn(en(r),t))throw new Error(n.source+(u?": [THROW_ID_17]":"")+" the whole input string can't be equal to "+(Sn(r)?"":"one of ")+"tails ("+t+")!")}if(!br(n.fromIndex,{includeZero:!0})&&!vr(n.fromIndex,{includeZero:!0}))throw new TypeError(n.source+(u?": [THROW_ID_18]":"")+" the fourth input argument must be a natural number! Currently it's: "+n.fromIndex);for(var s=e.concat(r).map(function(t){return t.charAt(0)}).reduce(function(t,e){return e.charCodeAt(0)>t[1]?[t[0],e.charCodeAt(0)]:e.charCodeAt(0)<t[0]?[e.charCodeAt(0),t[1]]:t},[e[0].charCodeAt(0),e[0].charCodeAt(0)]),l=[],c=!1,f={},y=!1,h=void 0,d=n.fromIndex,p=t.length;d<p;d++){var g=t[d].charCodeAt(0);if(g<=s[1]&&g>=s[0]){var m=_n(t,d,e);if(m&&n.matchHeadsAndTailsStrictlyInPairsByTheirOrder)for(var b=e.length;b--;)if(e[b]===m){h=b;break}if(m){if(!c){(f={}).headsStartAt=d,f.headsEndAt=d+m.length,c=!0,d+=m.length-1,y&&(y=!1);continue}if(n.throwWhenSomethingWrongIsDetected)throw new TypeError(n.source+(u?": [THROW_ID_19]":"")+' When processing "'+t+'", we found heads ('+t.slice(d,d+m.length)+') starting at character with index number "'+d+'" and there was another set of heads before it! Generally speaking, there should be "heads-tails-heads-tails", not "heads-heads-tails"!\nWe\'re talking about the area of the code:\n\n\n--------------------------------------starts\n'+t.slice(Math.max(d-200,0),d)+"\n      -------\x3e "+t.slice(d,d+m.length)+" <-------\n"+t.slice(d+m.length,Math.min(p,d+200))+"\n--------------------------------------ends\n\n\nTo turn off this error being thrown, set opts.throwWhenSomethingWrongIsDetected to Boolean false.")}var v=_n(t,d,r);if(c&&v&&n.matchHeadsAndTailsStrictlyInPairsByTheirOrder&&void 0!==h&&void 0!==r[h]&&r[h]!==v){for(var _=void 0,w=r.length;w--;)if(r[w]===v){_=w;break}throw new TypeError(n.source+(u?": [THROW_ID_20]":"")+' When processing "'+t+'", we had "opts.matchHeadsAndTailsStrictlyInPairsByTheirOrder" on. We found heads ('+e[h]+") but the tails the followed it were not of the same index, "+h+" ("+r[h]+") but "+_+" ("+v+").")}if(v){if(c){f.tailsStartAt=d,f.tailsEndAt=d+v.length,l.push(f),f={},c=!1,d+=v.length-1;continue}n.throwWhenSomethingWrongIsDetected&&(y=n.source+(u?": [THROW_ID_21]":"")+' When processing "'+t+'", we found tails ('+t.slice(d,d+v.length)+') starting at character with index number "'+d+"\" but there were no heads preceding it. That's very naughty!")}}if(n.throwWhenSomethingWrongIsDetected&&d===p-1){if(0!==Object.keys(f).length)throw new TypeError(n.source+(u?": [THROW_ID_22]":"")+' When processing "'+t+"\", we reached the end of the string and yet didn't find any tails ("+JSON.stringify(r,null,4)+") to match the last detected heads ("+t.slice(f.headsStartAt,f.headsEndAt)+")!");if(y)throw new Error(y)}}return l}var En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An="function"==typeof Symbol&&"symbol"===En(Symbol.iterator)?function(t){return void 0===t?"undefined":En(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":En(t)},kn=Array.isArray;function Wn(t,e,r){function n(t){return null!=t}var o=void 0;if(br(t,{includeZero:!0}))o=t;else{if(!vr(t,{includeZero:!0}))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_01] Input must mean an index, so it has to be either a natural number or a string containing natural number! Currently its type is: "+(void 0===t?"undefined":An(t))+", equal to: "+JSON.stringify(t,null,4));o=parseInt(t,10)}if(!n(e))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_02] We're missing the second input, rangesArr. It's meant to be an array of one or more range arrays.");if(!kn(e))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_03] Second input argument, rangesArr must be an array! Currently its type is: "+(void 0===t?"undefined":An(t))+", equal to: "+JSON.stringify(t,null,4));if(0===e.length)throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_04] Second input argument, rangesArr must be not empty! Currently it's empty.");var i=null;if(kn(e)&&e.length>0&&!kn(e[0]))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_05] Second input argument, rangesArr must be an array of (index range) arrays! Currently it's equal to: "+e+".");if(!e.every(function(t,e){return!(!br(t[0],{includeZero:!0})||!br(t[1],{includeZero:!0}))||(i=e,!1)}))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_06] Second input argument, rangesArr must consist of arrays which are natural number indexes representing string index ranges. However, "+_r(i)+" range ("+JSON.stringify(e[i],null,4)+") does not consist of only natural numbers!");if(!e.every(function(t,e){return!(t[0]>t[1])||(i=e,!1)}))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_07] The "+_r(i)+" range ("+JSON.stringify(e[i],null,4)+") in the ranges array has beginning of the index bigger than ending! They can be equal but in the backwards order.");if(n(r)&&!sr(r))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_08] Options object must be a plain object! Currently its type is: "+(void 0===r?"undefined":An(r))+", equal to: "+JSON.stringify(r,null,4));var a={inclusiveRangeEnds:!1,returnMatchedRangeInsteadOfTrue:!1},u=Object.assign(Object.assign({},a),r);if(rn(u,a,{msg:"ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_07*]"}),e.length<3){if(1===e.length){var s=void 0;return s=u.inclusiveRangeEnds?o>=e[0][0]&&o<=e[0][1]:o>e[0][0]&&o<e[0][1],u.returnMatchedRangeInsteadOfTrue&&s?e[0]:s}var l=void 0,c=void 0;return u.inclusiveRangeEnds?(l=o>=e[0][0]&&o<=e[0][1],c=o>=e[1][0]&&o<=e[1][1]):(l=o>e[0][0]&&o<e[0][1],c=o>e[1][0]&&o<e[1][1]),u.returnMatchedRangeInsteadOfTrue&&(l||c)?l?e[0]:e[1]:l||c}var f=un(e);if(o<f[0][0]||o>f[f.length-1][1])return!1;if(o===f[0][0])return!!u.inclusiveRangeEnds&&(!u.returnMatchedRangeInsteadOfTrue||f[0]);if(o===f[f.length-1][1])return!!u.inclusiveRangeEnds&&(!u.returnMatchedRangeInsteadOfTrue||f[f.length-1]);for(var y=0,h=f.length-1,d=Math.floor((h+y)/2);Math.floor(h-y)>1&&0!==d;)if(o<f[d=Math.floor((h+y)/2)][0])h=d;else{if(!(o>f[d][1]))return o===f[d][0]||o===f[d][1]?!!u.inclusiveRangeEnds&&(!u.returnMatchedRangeInsteadOfTrue||f[d]):!u.returnMatchedRangeInsteadOfTrue||f[d];y=d}if(h-y==1){var p=void 0,g=void 0;return u.inclusiveRangeEnds?(p=o>=e[y][0]&&o<=e[y][1],g=o>=e[h][0]&&o<=e[h][1]):(p=o>e[y][0]&&o<e[y][1],g=o>e[h][0]&&o<e[h][1]),u.returnMatchedRangeInsteadOfTrue&&(p||g)?p?e[y]:e[h]:p||g}return!1}var Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn="function"==typeof Symbol&&"symbol"===Rn(Symbol.iterator)?function(t){return void 0===t?"undefined":Rn(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":Rn(t)},Hn=Array.isArray;function Cn(t,e){if(0===arguments.length)throw new Error("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_01] inputs missing!");if("string"!=typeof t)throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_02] first input argument must be a string! Currently it's: "+(void 0===t?"undefined":xn(t))+", equal to: "+t);if(!Hn(e))throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_03] second input argument must be an array! Currently it's: "+(void 0===e?"undefined":xn(e))+", equal to: "+e);if(e.forEach(function(t,r){if(!Hn(t))throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_05] ranges array, second input arg., has "+r+_r(r)+" element not an array: "+JSON.stringify(t,null,4)+", which is "+(void 0===t?"undefined":xn(t)));if(!br(t[0],{includeZero:!0})){if(!vr(t[0]))throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_06] ranges array, second input arg. has "+r+_r(r)+" element, array ["+t[0]+","+t[1]+"]. That array has first element not an integer, but "+xn(t[0])+", equal to: "+JSON.stringify(t[0],null,4)+". Computer doesn't like this.");e[r][0]=Number.parseInt(e[r][0],10)}if(!br(t[1],{includeZero:!0})){if(!vr(t[1]))throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_07] ranges array, second input arg. has "+r+_r(r)+" element, array ["+t[0]+","+t[1]+"]. That array has second element not an integer, but "+xn(t[1])+", equal to: "+JSON.stringify(t[1],null,4)+". Computer doesn't like this.");e[r][1]=Number.parseInt(e[r][1],10)}}),e.length>0){var r=t.slice(e[e.length-1][1]);t=e.reduce(function(e,r,n,o){var i=0===n?0:o[n-1][1],a=o[n][0];return e+t.slice(i,a)+(null!=o[n][2]?o[n][2]:"")},""),t+=r}return t}var Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mn=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Nn="function"==typeof Symbol&&"symbol"===Dn(Symbol.iterator)?function(t){return void 0===t?"undefined":Dn(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":Dn(t)};function qn(t,e){function r(t,e,r){return t.charCodeAt(0)>=e&&t.charCodeAt(0)<=r}function n(t){return"<"===t||""===t.trim()}if("string"!=typeof t)throw new Error("string-collapse-white-space/collapse(): [THROW_ID_01] The input is not string but "+(void 0===t?"undefined":Nn(t))+", equal to: "+JSON.stringify(t,null,4));if(void 0!==e&&null!==e&&!sr(e))throw new Error("string-collapse-white-space/collapse(): [THROW_ID_02] The opts is not a plain object but "+(void 0===e?"undefined":Nn(e))+", equal to:\n"+JSON.stringify(e,null,4));if(0===t.length)return"";var o=new yn,i={trimStart:!0,trimEnd:!0,trimLines:!1,trimnbsp:!1,recogniseHTML:!0},a=Object.assign({},i,e);rn(a,i,{msg:"string-collapse-white-space/collapse(): [THROW_ID_03*]"});var u=void 0;a.recogniseHTML&&(u=new yn);var s=t,l=null,c=null,f=null,y=!1,h=!1,d=null,p=!1,g=!1,m=void 0,b=!1,v=!1;a.recogniseHTML&&(m={equalDoubleQuoteCombo:0,equalOnly:0,doubleQuoteOnly:0,spacesBetweenLetterChunks:0,linebreaks:0});for(var _=t.length;_--;)if(" "===t[_]?null===l&&(l=_):null!==l&&(_+1!==l&&o.add(_+1,l),l=null),""===t[_].trim()&&(!a.trimnbsp&&""!==t[_]||a.trimnbsp)?(null===c&&(c=_),"\n"!==t[_]&&"\r"!==t[_]&&null===f&&(f=_+1),"\n"!==t[_]&&"\r"!==t[_]||(null!==f&&(a.trimLines&&o.add(_+1,f),f=null),"\n"!==t[_-1]&&"\r"!==t[_-1]&&(f=_,y=!0))):(null!==c&&(_+1!==c+1&&c===t.length-1&&a.trimEnd&&o.add(_+1,c+1),c=null),null!==f&&(y&&a.trimLines&&(y=!1,o.add(_+1,f)),f=null)),0===_&&(null!==c&&a.trimStart?o.add(0,c+1):null!==l&&o.add(_+1,l+1)),a.recogniseHTML)if(""===t[_].trim()){if(h&&!g&&(g=!0),p&&!d&&(d=_+1),p&&void 0!==t[_-1]&&""!==t[_-1].trim()&&"<"!==t[_-1]&&"/"!==t[_-1]&&(p=!1,h=!1,u.wipe()),!b&&!v&&""===t[_].trim()&&"<"!==t[_-1]&&(void 0===t[_+1]||""!==t[_+1].trim()&&"/"!==t[_+1].trim()))if(void 0===t[_-1]||""!==t[_-1].trim()&&"<"!==t[_-1]&&"/"!==t[_-1])m.spacesBetweenLetterChunks+=1;else for(var w=_-1;w--;)if(""!==t[w].trim()){"<"===t[w]?b=!0:"/"!==t[w]&&(m.spacesBetweenLetterChunks+=_-w);break}}else"="===t[_]?(m.equalOnly+=1,'"'===t[_+1]&&(m.equalDoubleQuoteCombo+=1)):'"'===t[_]&&(m.doubleQuoteOnly+=1),v&&(v=!1),null!==d&&(u.add(_+1,d),d=null),">"===t[_]?(m={equalDoubleQuoteCombo:0,equalOnly:0,doubleQuoteOnly:0,spacesBetweenLetterChunks:0,linebreaks:0},v=!0,h?u.wipe():(h=!0,void 0===t[_-1]||""!==t[_-1].trim()||d||(d=_)),g||(g=!0)):"<"===t[_]?(h=!1,b&&(b=!1),m.spacesBetweenLetterChunks>0&&0===m.equalDoubleQuoteCombo&&(p=!1,u.wipe()),p&&u.current()&&(u.current().forEach(function(t){var e=Mn(t,2),r=e[0],n=e[1];return o.add(r,n)}),p=!1),m={equalDoubleQuoteCombo:0,equalOnly:0,doubleQuoteOnly:0,spacesBetweenLetterChunks:0,linebreaks:0}):h&&"/"===t[_]?d=_:h&&!p&&(g&&r(t[_],97,122)?(g=!1,r(t[_],97,110)?("a"===t[_]&&("e"===t[_-1]&&vn(t,_,["area","textarea"],{cb:n,i:!0})||"t"===t[_-1]&&vn(t,_,["data","meta"],{cb:n,i:!0})||n(t[_-1]))||"b"===t[_]&&(vn(t,_,["rb","sub"],{cb:n,i:!0})||n(t[_-1]))||"c"===t[_]&&vn(t,_,"rtc",{cb:n,i:!0})||"d"===t[_]&&("a"===t[_-1]&&vn(t,_,["head","thead"],{cb:n,i:!0})||vn(t,_,["kbd","dd","embed","legend","td"],{cb:n,i:!0}))||"e"===t[_]&&(vn(t,_,"source",{cb:n,i:!0})||"d"===t[_-1]&&vn(t,_,["aside","code"],{cb:n,i:!0})||"l"===t[_-1]&&vn(t,_,["table","article","title","style"],{cb:n,i:!0})||"m"===t[_-1]&&vn(t,_,["iframe","time"],{cb:n,i:!0})||"r"===t[_-1]&&vn(t,_,["pre","figure","picture"],{cb:n,i:!0})||"t"===t[_-1]&&vn(t,_,["template","cite","blockquote"],{cb:n,i:!0})||vn(t,_,"base",{cb:n,i:!0})||n(t[_-1]))||"g"===t[_]&&vn(t,_,["img","strong","dialog","svg"],{cb:n,i:!0})||"h"===t[_]&&vn(t,_,["th","math"],{cb:n,i:!0})||"i"===t[_]&&(vn(t,_,["bdi","li"],{cb:n,i:!0})||n(t[_-1]))||"k"===t[_]&&vn(t,_,["track","link","mark"],{cb:n,i:!0})||"l"===t[_]&&vn(t,_,["html","ol","ul","dl","label","del","small","col"],{cb:n,i:!0})||"m"===t[_]&&vn(t,_,["param","em","menuitem","form"],{cb:n,i:!0})||"n"===t[_]&&("o"===t[_-1]&&vn(t,_,["section","caption","figcaption","option","button"],{cb:n,i:!0})||vn(t,_,["span","keygen","dfn","main"],{cb:n,i:!0})))&&(p=!0):("o"===t[_]&&vn(t,_,["bdo","video","audio"],{cb:n,i:!0})||"p"===t[_]&&(n(t[_-1])||"u"===t[_-1]&&vn(t,_,["hgroup","colgroup","optgroup","sup"],{cb:n,i:!0})||vn(t,_,["map","samp","rp"],{cb:n,i:!0}))||"q"===t[_]&&n(t[_-1])||"r"===t[_]&&("e"===t[_-1]&&vn(t,_,["header","meter","footer"],{cb:n,i:!0})||vn(t,_,["var","br","abbr","wbr","hr","tr"],{cb:n,i:!0}))||"s"===t[_]&&("s"===t[_-1]&&vn(t,_,["address","progress"],{cb:n,i:!0})||vn(t,_,["canvas","details","ins"],{cb:n,i:!0})||n(t[_-1]))||"t"===t[_]&&("c"===t[_-1]&&vn(t,_,["object","select"],{cb:n,i:!0})||"o"===t[_-1]&&vn(t,_,["slot","tfoot"],{cb:n,i:!0})||"p"===t[_-1]&&vn(t,_,["script","noscript"],{cb:n,i:!0})||"u"===t[_-1]&&vn(t,_,["input","output"],{cb:n,i:!0})||vn(t,_,["fieldset","rt","datalist","dt"],{cb:n,i:!0}))||"u"===t[_]&&(n(t[_-1])||vn(t,_,"menu",{cb:n,i:!0}))||"v"===t[_]&&vn(t,_,["nav","div"],{cb:n,i:!0})||"y"===t[_]&&vn(t,_,["ruby","body","tbody","summary"],{cb:n,i:!0}))&&(p=!0)):g&&r(t[_],49,54)?(g=!1,"h"!==t[_-1]||"<"!==t[_-2]&&""!==t[_-2].trim()||(p=!0)):"="!==t[_]&&'"'!==t[_]||(g=!1));return o.current()&&(s=Cn(t,o.current()),o.wipe(),o=void 0),s}var Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Pn(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var Bn=Array.isArray;return function(t,e){function r(t){return/[.#\-_A-Za-z0-9]/.test(t)}function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t){return null!=t}function a(t){return"string"==typeof t}var u=void 0,s=void 0,l=0,c=0,f=[],y=[],h=[],d=0,p=0,g=0,m=0,b=0,v=0,_=0,w=0,O=0,S=!1,T=!1,I=/[\n]?\s*@media[^{]*{\s*}/g,j=new yn;if("string"!=typeof t)throw new TypeError("email-remove-unused-css/emailRemoveUnusedCss(): [THROW_ID_01] Input must be string! Currently it's "+(void 0===t?"undefined":Jn(t)));if(!sr(e)){if(void 0!==e&&null!==e)throw new TypeError("email-remove-unused-css/emailRemoveUnusedCss(): [THROW_ID_02] Options, second input argument, must be a plain object! Currently it's "+(void 0===e?"undefined":Jn(e))+", equal to: "+JSON.stringify(e,null,4));e={}}if(sr(e)&&n(e,"backend")&&function t(e){var r=void 0,n=void 0,o=!0;if(Array.isArray(e)){if(0===e.length)return!0;for(r=0,n=e.length;r<n;r++){if(null===(o=t(e[r])))return null;if(!o)return!1}}else if(sr(e)){if(0===Object.keys(e).length)return!0;for(r=0,n=Object.keys(e).length;r<n;r++){if(null===(o=t(e[Object.keys(e)[r]])))return null;if(!o)return!1}}else{if("string"!=typeof e)return null;if(0!==e.length)return!1}return o}(e.backend)&&(e.backend=[]),a((e=Object.assign({},{whitelist:[],backend:[]},e)).whitelist)&&(e.whitelist=[e.whitelist]),!Bn(e.whitelist))throw new TypeError("email-remove-unused-css/emailRemoveUnusedCss(): [THROW_ID_03] opts.whitelist should be an array, but it was customised to a wrong thing, "+JSON.stringify(e.whitelist,null,4));if(e.whitelist.length>0&&!e.whitelist.every(function(t){return a(t)}))throw new TypeError("email-remove-unused-css/emailRemoveUnusedCss(): [THROW_ID_04] opts.whitelist array should contain only string-type elements. Currently we\ve got:\n"+JSON.stringify(e.whitelist,null,4));if(!Bn(e.backend))throw new TypeError("email-remove-unused-css/emailRemoveUnusedCss(): [THROW_ID_05] opts.backend should be an array, but it was customised to a wrong thing, "+JSON.stringify(e.backend,null,4));if(e.backend.length>0&&e.backend.some(function(t){return!sr(t)}))throw new TypeError("email-remove-unused-css/emailRemoveUnusedCss(): [THROW_ID_06] opts.backend array should contain only plain objects but it contains something else:\n"+JSON.stringify(e.backend,null,4));if(e.backend.length>0&&!e.backend.every(function(t){return n(t,"heads")&&n(t,"tails")}))throw new TypeError('email-remove-unused-css/emailRemoveUnusedCss(): [THROW_ID_07] every object within opts.backend should contain keys "heads" and "tails" but currently it\'s not the case. Whole "opts.backend" value array is currently equal to:\n'+JSON.stringify(e.backend,null,4));var E=[];e.backend.length>0&&(E=jn(t,e.backend.map(function(t){return t.heads}),e.backend.map(function(t){return t.tails})).map(function(t){return[t.headsStartAt,t.tailsEndAt-1]}));var A=!1,k=!1,W=!1,R=null,x=void 0;for(u=0,s=t.length;u<s;u++){var H=t[u];if("\n"!==H&&"\r"!==H||k&&(k=!1),W&&(null===R||"string"!=typeof R||"string"==typeof R&&0===R.length?W=!1:_n(R,0,H)&&(R=null,W=!1)),!W&&""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]=="<style"){S=!0;for(var C=u;C<s;C++)if(">"===t[C]){l=C+1;break}}if(W||""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]!="/style"||(S=!1,c=u-1),W||""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]!="@media"||(A=!0),W||""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]+t[u+6]!="@import"||(k=!0),!W&&S&&"}"===H&&(T=!1),W||"{"!==H||(A?A=!1:S&&!T&&(T=!0)),W||"'"!==H&&'"'!==H||k&&(k=!1,W=!0,R=H),!W&&l&&u>=l&&(0===c&&u>=l||l>c&&l<u)&&("."===H||"#"===H)&&u>=O&&!T){S=!0,d=u;for(var D=u;D<s;D++)if(!r(t[D])){f.push(t.slice(d,D)),O=D;break}}if(!W&&""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]=="<body")for(var M=u;M<s;M++)if(">"===t[M]){m=M+1;break}W||0===m||""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]+t[u+6]!='class="'||" "!==t[u-1]&&'"'!==t[u-1]||(p=u+6),W||0===m||""+t[u]+t[u+1]+t[u+2]+t[u+3]!='id="'||" "!==t[u-1]&&'"'!==t[u-1]||(g=u+3),!W&&0!==p&&'"'===H&&u>p&&(p=0),!W&&0!==g&&'"'===H&&u>g&&(g=0),!W&&p&&u>p&&r(H)&&0===b&&(b=u),!W&&0!==b&&u>b&&(!r(H)||e.backend.length&&E&&E.length&&Wn(u,E,{inclusiveRangeEnds:!0,returnMatchedRangeInsteadOfTrue:!0}))&&(y.push("."+t.slice(b,u)),b=0),!W&&g&&u>g&&r(H)&&0===_&&(_=u),!W&&0!==_&&u>_&&(!r(H)||e.backend.length&&E&&E.length&&Wn(u,E,{inclusiveRangeEnds:!0,returnMatchedRangeInsteadOfTrue:!0}))&&(h.push("#"+t.slice(_,u)),_=0),e.backend.length&&E&&E.length&&(x=Wn(u,E,{inclusiveRangeEnds:!0,returnMatchedRangeInsteadOfTrue:!0}))&&(u=x[1])}var N=y.concat(h),q={};f.forEach(function(t){Xe(t).forEach(function(t){Object.prototype.hasOwnProperty.call(q,t)?q[t]+=1:q[t]=1})});for(var J=Object.assign({},q),P=V(f.reduce(function(t,e){return t.concat(Xe(e))},[])),B=Array.from(f),L=[],$=0,F=B.length;$<F;$++){var Z,K=void 0;o(B[$])&&(K=Xe(B[$])),K.every(function(t){return N.includes(t)})||((Z=L).push.apply(Z,Pn(Xe(B[$]))),B.splice($,1),$-=1,F-=1)}L=V(gr(L,e.whitelist));var Q=void 0;Q=B.length>0?B.reduce(function(t,e){return t.concat(Xe(e))},[]):[];var U=gr(i(V(Array.from(P)),y.concat(h)),e.whitelist),G=V(gr(i(y.concat(h),Q),e.whitelist));U=V(U.concat(Dt(L,G))).sort();var z=G.filter(function(t){return t.startsWith(".")}).map(function(t){return t.slice(1)}),X=G.filter(function(t){return t.startsWith("#")}).map(function(t){return t.slice(1)});l=0,c=0;var Y=void 0,tt=!1,et=!1;for(A=!1,u=0,s=t.length;u<s;u++){var rt=t[u];if(""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]=="<style"){for(var nt=u;nt<s;nt++)if(">"===t[nt]){l=nt+1;break}tt=!0}""+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]+t[u+6]=="/style"&&(c=u,tt=!1),""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]=="@media"&&(A=!0);var ot=!1;if("@"===t[u]&&"m"!==t[u+1])for(var it=";",at=u+2;at<s;at++){if("("===t[at]&&";"===it&&(it=")"),"{"===t[at]&&";"===it&&(it="}"),'"'===t[at]&&";"===it&&(it='"'),"'"===t[at]&&";"===it&&(it="'"),""===t[at].trim()&&!ot){ot=!0;for(var ut=["@",".","#"],st=!1,lt=at;lt<s;lt++)if(""!==t[lt].trim()){if(!st&&""!==t[lt].trim()&&ut.includes(t[lt])){j.add(u,lt),at=lt;break}st||(st=!0)}}if(t[at]===it){if(")"!==it&&"}"!==it&&'"'!==it&&"'"!==it){ot||j.add(u,at+1),u=at;break}it=";"}}"{"===t[u]&&(A?A=!1:tt&&!et&&(et=!0)),tt&&et&&"}"===t[u]&&(et=!1);var ct=!1;if(l&&u>=l&&(0===c&&u>=l||l>c&&l<u)&&("."===rt||"#"===rt)&&!et){Y=!0;for(var ft=void 0,yt=null,ht=u-1;ht>0;ht--){if(">"===t[ht]||"{"===t[ht]||"}"===t[ht]||";"===t[ht]){yt<(ft=ht+1)&&(yt=ft);break}""===t[ht].trim()?yt||(yt=ht+1):yt=null}for(var dt=void 0,pt=void 0,gt=void 0,mt=u;mt<s;mt++){if("{"===t[mt]&&(gt=!0),"}"===t[mt]){gt=!1,pt=mt+1,ct=!1;break}if("{"===t[mt]||","===t[mt]&&!gt){var bt=void 0;if(dt=mt,ct||","!==t[mt]){if("{"===t[mt])for(var vt=mt-1;vt>0;vt--)if(""!==t[vt].trim()){dt=vt+1;break}Dt(Xe(t.slice(yt,dt)),U).length>0&&void 0!==yt&&void 0!==dt?(Xe(t.slice(yt,dt)).forEach(function(t){Object.prototype.hasOwnProperty.call(J,t)&&(J[t]-=1)}),j.add(yt,dt)):Y=!1,bt=dt}else{ct=!0,bt=mt;for(var _t=mt+1;_t<s;_t++)if(""!==t[_t].trim()){dt=_t-1;break}Dt(Xe(t.slice(yt,dt+1)),U).length>0&&void 0!==yt&&dt+1!==void 0?(Xe(t.slice(yt,dt+1)).forEach(function(t){Object.prototype.hasOwnProperty.call(J,t)&&(J[t]-=1)}),j.add(yt,dt+1)):Y=!1}u=mt-1,","===t[mt]&&(yt=bt)}}Y&&void 0!==ft&&void 0!==pt&&j.add(ft,pt),u=pt-1}}var wt=Object.keys(J).filter(function(t){return 0===J[t]});for(z=V(z.concat(Dt(gr(N,e.whitelist),wt).filter(function(t){return"."===t[0]}).map(function(t){return t.slice(1)}))),G=V(G.concat(z.map(function(t){return"."+t}))).sort(),u=t.indexOf("<body"),s=t.length;u<s;u++){if(""+t[u]+t[u+1]+t[u+2]+t[u+3]+t[u+4]+t[u+5]+t[u+6]=='class="'&&(" "===t[u-1]||'"'===t[u-1])){var Ot=void 0;b=u+7;for(var St=u+7;St<s;St++)if('"'===t[St]){v=St;break}var Tt=i(t.slice(b,v).split(" "),[""]).map(function(t){return t.trim()}),It=i(Array.from(Tt),z);if(It=It.length>0?' class="'+It.join(" ")+'"':"",Dt(Tt,z).length>0||""===It){for(var jt=u-1;jt>0;jt--)if(" "!==t[jt]){Ot=jt+1;break}void 0!==Ot&&v+1!==void 0&&j.add(Ot,v+1,It)}}""+t[u]+t[u+1]+t[u+2]+t[u+3]!='id="'||" "!==t[u-1]&&'"'!==t[u-1]||function(){var r=void 0;_=u+4;for(var n=u+4;n<s;n++)if('"'===t[n]){w=n;break}var o=t.slice(_,w),i=e.backend.map(function(t){return t.heads}),a=e.backend.map(function(t){return t.tails}),l=void 0,c=void 0;i.length>0&&a.length>0&&(l=jn(o,i,a),c=l.reduce(function(t,e){return t.push([e.headsStartAt,e.tailsEndAt]),t},[]));for(var f=new yn,y=function(t,e){var r=_n(o,t,X,{cb:function(e){return"string"==typeof e&&(""===e.trim()||c.length&&!Wn(t,c,{inclusiveRangeEnds:!0}))||void 0===e}});r&&f.add(t,t+r.length)},h=0,d=o.length;h<d;h++)y(h);f.current()&&(o=Cn(o,f.current()));var p="";""!==o.trim()&&(p=' id="'+qn(o,{recogniseHTML:!1})+'"');for(var g=u-1;g>0;g--)if(" "!==t[g]){r=g+1;break}j.add(r,w+1,p)}()}for(o(j.current())&&(t=Cn(t,j.current()));I.test(t);)t=t.replace(I,"");return{result:t=(t=(t=t.replace(/[\n]?\s*<style[^>]*>\s*<\/style\s*>/g,"\n")).replace("\n\n","\n")).replace("\n\n","\n").trim()+"\n",allInHead:P.sort(),allInBody:N.sort(),deletedFromHead:V(Object.keys(J).filter(function(t){return 0===J[t]})).sort(),deletedFromBody:G.sort()}}});
