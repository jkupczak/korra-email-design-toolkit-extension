/* https://bitbucket.org/codsen/email-remove-unused-css/src/master/ */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.emailRemoveUnusedCss=e()}(this,function(){"use strict";function h(t,e,r){if(e!=e)return function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,i,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function y(t,e,r,n){for(var o=r-1,i=t.length;++o<i;)if(n(t[o],e))return o;return-1}function i(t){return t!=t}var d=Array.prototype.splice;function r(t,e,r,n){var o,i=n?y:h,a=-1,s=e.length,u=t;for(t===e&&(e=function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(e)),r&&(u=function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(t,(o=r,function(t){return o(t)})));++a<s;)for(var l=0,c=e[a],f=r?r(c):c;-1<(l=i(u,f,l,n));)u!==t&&d.call(u,l,1),d.call(t,l,1);return t}var Dt=function(t,e){return t&&t.length&&e&&e.length?r(t,e):t},_="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t,e){return t(e={exports:{}},e.exports),e.exports}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=200,n="__lodash_hash_undefined__",o="[object Function]",s="[object GeneratorFunction]",u=/^\[object .+?Constructor\]$/,e="object"==a(_)&&_&&_.Object===Object&&_,l="object"==("undefined"==typeof self?"undefined":a(self))&&self&&self.Object===Object&&self,c=e||l||Function("return this")();function g(t,e){return!!(t?t.length:0)&&-1<function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,f,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)}function m(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function f(t){return t!=t}function b(t,e){return t.has(e)}function v(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var w,O=Array.prototype,S=Function.prototype,T=Object.prototype,I=c["__core-js_shared__"],j=(w=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",A=S.toString,E=T.hasOwnProperty,W=T.toString,R=RegExp("^"+A.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=O.splice,H=Z(c,"Map"),x=Z(c,"Set"),D=Z(Object,"create");function C(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function M(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function N(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function P(t){var e=-1,r=t?t.length:0;for(this.__data__=new N;++e<r;)this.add(t[e])}function q(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function J(t){return!(!F(t)||(e=t,j&&j in e))&&((n=F(r=t)?W.call(r):"")==o||n==s||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?R:u).test(function(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e,r,n}C.prototype.clear=function(){this.__data__=D?D(null):{}},C.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},C.prototype.get=function(t){var e=this.__data__;if(D){var r=e[t];return r===n?void 0:r}return E.call(e,t)?e[t]:void 0},C.prototype.has=function(t){var e=this.__data__;return D?void 0!==e[t]:E.call(e,t)},C.prototype.set=function(t,e){return this.__data__[t]=D&&void 0===e?n:e,this},M.prototype.clear=function(){this.__data__=[]},M.prototype.delete=function(t){var e=this.__data__,r=q(e,t);return!(r<0||(r==e.length-1?e.pop():k.call(e,r,1),0))},M.prototype.get=function(t){var e=this.__data__,r=q(e,t);return r<0?void 0:e[r][1]},M.prototype.has=function(t){return-1<q(this.__data__,t)},M.prototype.set=function(t,e){var r=this.__data__,n=q(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},N.prototype.clear=function(){this.__data__={hash:new C,map:new(H||M),string:new C}},N.prototype.delete=function(t){return L(this,t).delete(t)},N.prototype.get=function(t){return L(this,t).get(t)},N.prototype.has=function(t){return L(this,t).has(t)},N.prototype.set=function(t,e){return L(this,t).set(t,e),this},P.prototype.add=P.prototype.push=function(t){return this.__data__.set(t,n),this},P.prototype.has=function(t){return this.__data__.has(t)};var B=x&&1/v(new x([,-0]))[1]==1/0?function(t){return new x(t)}:function(){};function L(t,e){var r,n,o=t.__data__;return("string"==(n=void 0===(r=e)?"undefined":a(r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Z(t,e){var r,n,o=(n=e,null==(r=t)?void 0:r[n]);return J(o)?o:void 0}function F(t){var e=void 0===t?"undefined":a(t);return!!t&&("object"==e||"function"==e)}var Ct=function(t){return t&&t.length?function(t,e,r){var n=-1,o=g,i=t.length,a=!0,s=[],u=s;if(r)a=!1,o=m;else if(p<=i){var l=e?null:B(t);if(l)return v(l);a=!1,o=b,u=new P}else u=e?[]:s;t:for(;++n<i;){var c=t[n],f=e?e(c):c;if(c=r||0!==c?c:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(c)}else o(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}(t):[]},$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V="__lodash_hash_undefined__",K=9007199254740991,Q="[object Function]",z="[object GeneratorFunction]",G=/^\[object .+?Constructor\]$/,U="object"==$(_)&&_&&_.Object===Object&&_,X="object"==("undefined"==typeof self?"undefined":$(self))&&self&&self.Object===Object&&self,Y=U||X||Function("return this")();function tt(t,e){return!!(t?t.length:0)&&-1<function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,nt,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)}function et(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function rt(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function nt(t){return t!=t}function ot(e){return function(t){return e(t)}}function it(t,e){return t.has(e)}var at,st,ut,lt=Array.prototype,ct=Function.prototype,ft=Object.prototype,ht=Y["__core-js_shared__"],yt=(at=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||""))?"Symbol(src)_1."+at:"",dt=ct.toString,pt=ft.hasOwnProperty,gt=ft.toString,mt=RegExp("^"+dt.call(pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=lt.splice,vt=Math.max,_t=Math.min,wt=kt(Y,"Map"),Ot=kt(Object,"create");function St(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function It(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=t?t.length:0;for(this.__data__=new It;++e<r;)this.add(t[e])}function At(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function Et(t){return!(!xt(t)||(e=t,yt&&yt in e))&&(Ht(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?mt:G).test(function(t){if(null!=t){try{return dt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function Wt(t){return(o=e=t)&&"object"==(void 0===o?"undefined":$(o))&&(null!=(r=e)&&("number"==typeof(n=r.length)&&-1<n&&n%1==0&&n<=K)&&!Ht(r))?t:[];var e,r,n,o}function Rt(t,e){var r,n,o=t.__data__;return("string"==(n=void 0===(r=e)?"undefined":$(r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function kt(t,e){var r,n,o=(n=e,null==(r=t)?void 0:r[n]);return Et(o)?o:void 0}function Ht(t){var e=xt(t)?gt.call(t):"";return e==Q||e==z}function xt(t){var e=void 0===t?"undefined":$(t);return!!t&&("object"==e||"function"==e)}St.prototype.clear=function(){this.__data__=Ot?Ot(null):{}},St.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},St.prototype.get=function(t){var e=this.__data__;if(Ot){var r=e[t];return r===V?void 0:r}return pt.call(e,t)?e[t]:void 0},St.prototype.has=function(t){var e=this.__data__;return Ot?void 0!==e[t]:pt.call(e,t)},St.prototype.set=function(t,e){return this.__data__[t]=Ot&&void 0===e?V:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=At(e,t);return!(r<0||(r==e.length-1?e.pop():bt.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=At(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return-1<At(this.__data__,t)},Tt.prototype.set=function(t,e){var r=this.__data__,n=At(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},It.prototype.clear=function(){this.__data__={hash:new St,map:new(wt||Tt),string:new St}},It.prototype.delete=function(t){return Rt(this,t).delete(t)},It.prototype.get=function(t){return Rt(this,t).get(t)},It.prototype.has=function(t){return Rt(this,t).has(t)},It.prototype.set=function(t,e){return Rt(this,t).set(t,e),this},jt.prototype.add=jt.prototype.push=function(t){return this.__data__.set(t,V),this},jt.prototype.has=function(t){return this.__data__.has(t)};var Mt=(st=function(t){var e=rt(t,Wt);return e.length&&e[0]===t[0]?function(t,e,r){for(var n=r?et:tt,o=t[0].length,i=t.length,a=i,s=Array(i),u=1/0,l=[];a--;){var c=t[a];a&&e&&(c=rt(c,ot(e))),u=_t(c.length,u),s[a]=!r&&(e||120<=o&&120<=c.length)?new jt(a&&c):void 0}c=t[0];var f=-1,h=s[0];t:for(;++f<o&&l.length<u;){var y=c[f],d=e?e(y):y;if(y=r||0!==y?y:0,!(h?it(h,d):n(l,d,r))){for(a=i;--a;){var p=s[a];if(!(p?it(p,d):n(t[a],d,r)))continue t}h&&h.push(d),l.push(y)}}return l}(e):[]},ut=vt(void 0===ut?st.length-1:ut,0),function(){for(var t=arguments,e=-1,r=vt(t.length-ut,0),n=Array(r);++e<r;)n[e]=t[ut+e];e=-1;for(var o=Array(ut+1);++e<ut;)o[e]=t[e];return o[ut]=n,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(st,this,o)}),Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt=1/0,qt="[object Symbol]",Jt="object"==Nt(_)&&_&&_.Object===Object&&_,Bt="object"==("undefined"==typeof self?"undefined":Nt(self))&&self&&self.Object===Object&&self,Lt=Jt||Bt||Function("return this")(),Zt=Object.prototype.toString,Ft=Lt.Symbol,$t=Ft?Ft.prototype:void 0,Vt=$t?$t.toString:void 0;function Kt(t){if("string"==typeof t)return t;if("symbol"==(void 0===(e=t)?"undefined":Nt(e))||(r=e)&&"object"==(void 0===r?"undefined":Nt(r))&&Zt.call(e)==qt)return Vt?Vt.call(t):"";var e,r,n=t+"";return"0"==n&&1/t==-Pt?"-0":n}var Qt=function(){var t,e=arguments,r=null==(t=e[0])?"":Kt(t);return e.length<3?r:r.replace(e[1],e[2])},zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt="__lodash_hash_undefined__",Ut=9007199254740991,Xt="[object Function]",Yt="[object GeneratorFunction]",te=/^\[object .+?Constructor\]$/,ee="object"==zt(_)&&_&&_.Object===Object&&_,re="object"==("undefined"==typeof self?"undefined":zt(self))&&self&&self.Object===Object&&self,ne=ee||re||Function("return this")();function oe(t,e){return!!(t?t.length:0)&&-1<function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,ae,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)}function ie(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function ae(t){return t!=t}function se(t,e){return t.has(e)}var ue,le,ce,fe=Array.prototype,he=Function.prototype,ye=Object.prototype,de=ne["__core-js_shared__"],pe=(ue=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||""))?"Symbol(src)_1."+ue:"",ge=he.toString,me=ye.hasOwnProperty,be=ye.toString,ve=RegExp("^"+ge.call(me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=fe.splice,we=Math.max,Oe=He(ne,"Map"),Se=He(Object,"create");function Te(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ie(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function je(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ae(t){var e=-1,r=t?t.length:0;for(this.__data__=new je;++e<r;)this.add(t[e])}function Ee(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function We(t,e,r,n){var o,i=-1,a=oe,s=!0,u=t.length,l=[],c=e.length;if(!u)return l;r&&(e=function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,(o=r,function(t){return o(t)}))),n?(a=ie,s=!1):200<=e.length&&(a=se,s=!1,e=new Ae(e));t:for(;++i<u;){var f=t[i],h=r?r(f):f;if(f=n||0!==f?f:0,s&&h==h){for(var y=c;y--;)if(e[y]===h)continue t;l.push(f)}else a(e,h,n)||l.push(f)}return l}function Re(t){return!(!De(t)||(e=t,pe&&pe in e))&&(xe(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?ve:te).test(function(t){if(null!=t){try{return ge.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function ke(t,e){var r,n,o=t.__data__;return("string"==(n=void 0===(r=e)?"undefined":zt(r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function He(t,e){var r,n,o=(n=e,null==(r=t)?void 0:r[n]);return Re(o)?o:void 0}function xe(t){var e=De(t)?be.call(t):"";return e==Xt||e==Yt}function De(t){var e=void 0===t?"undefined":zt(t);return!!t&&("object"==e||"function"==e)}Te.prototype.clear=function(){this.__data__=Se?Se(null):{}},Te.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Te.prototype.get=function(t){var e=this.__data__;if(Se){var r=e[t];return r===Gt?void 0:r}return me.call(e,t)?e[t]:void 0},Te.prototype.has=function(t){var e=this.__data__;return Se?void 0!==e[t]:me.call(e,t)},Te.prototype.set=function(t,e){return this.__data__[t]=Se&&void 0===e?Gt:e,this},Ie.prototype.clear=function(){this.__data__=[]},Ie.prototype.delete=function(t){var e=this.__data__,r=Ee(e,t);return!(r<0||(r==e.length-1?e.pop():_e.call(e,r,1),0))},Ie.prototype.get=function(t){var e=this.__data__,r=Ee(e,t);return r<0?void 0:e[r][1]},Ie.prototype.has=function(t){return-1<Ee(this.__data__,t)},Ie.prototype.set=function(t,e){var r=this.__data__,n=Ee(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},je.prototype.clear=function(){this.__data__={hash:new Te,map:new(Oe||Ie),string:new Te}},je.prototype.delete=function(t){return ke(this,t).delete(t)},je.prototype.get=function(t){return ke(this,t).get(t)},je.prototype.has=function(t){return ke(this,t).has(t)},je.prototype.set=function(t,e){return ke(this,t).set(t,e),this},Ae.prototype.add=Ae.prototype.push=function(t){return this.__data__.set(t,Gt),this},Ae.prototype.has=function(t){return this.__data__.has(t)};var Ce=(le=function(t,e){return(i=r=t)&&"object"==(void 0===i?"undefined":zt(i))&&(null!=(n=r)&&("number"==typeof(o=n.length)&&-1<o&&o%1==0&&o<=Ut)&&!xe(n))?We(t,e):[];var r,n,o,i},ce=we(void 0===ce?le.length-1:ce,0),function(){for(var t=arguments,e=-1,r=we(t.length-ce,0),n=Array(r);++e<r;)n[e]=t[ce+e];e=-1;for(var o=Array(ce+1);++e<ce;)o[e]=t[e];return o[ce]=n,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(le,this,o)}),Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne=9007199254740991,Pe="[object Arguments]",qe="[object Function]",Je="[object GeneratorFunction]",Be="object"==Me(_)&&_&&_.Object===Object&&_,Le="object"==("undefined"==typeof self?"undefined":Me(self))&&self&&self.Object===Object&&self,Ze=Be||Le||Function("return this")();function Fe(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var $e=Object.prototype,Ve=$e.hasOwnProperty,Ke=$e.toString,Qe=Ze.Symbol,ze=$e.propertyIsEnumerable,Ge=Qe?Qe.isConcatSpreadable:void 0;function Ue(t){return Xe(t)||!!(l=r=e=t)&&"object"==(void 0===l?"undefined":Me(l))&&(null!=(n=r)&&("number"==typeof(u=n.length)&&-1<u&&u%1==0&&u<=Ne)&&(s=void 0===(a=o=n)?"undefined":Me(a),!((i=!a||"object"!=s&&"function"!=s?"":Ke.call(o))==qe||i==Je)))&&Ve.call(e,"callee")&&(!ze.call(e,"callee")||Ke.call(e)==Pe)||!!(Ge&&t&&t[Ge]);var e,r,n,o,i,a,s,u,l}var Xe=Array.isArray;var Ye=function(t){return t&&t.length?function t(e,r,n,o,i){var a=-1,s=e.length;for(n||(n=Ue),i||(i=[]);++a<s;){var u=e[a];0<r&&n(u)?1<r?t(u,r-1,n,o,i):Fe(i,u):o||(i[i.length]=u)}return i}(t,1/0):[]};function tr(t){if(void 0===t)throw new Error;var o=t.replace(/[\0'"\\\n\r\v\t\b\f]/g," ").split(/([.#])/);return o.forEach(function(t,e){"."!==t&&"#"!==t||(null!=o[e+1]&&(o[e+1]=t+o[e+1]),o[e]="")}),o.forEach(function(t,e){var r,n;o[e]=Ce((n=o[e],r=Qt(n,/[^.#]*/m,""),Qt(r,/[ ~\\!@$%^&*()+=,/';:"?><[\]\\{}|`].*/g,"")).split(/([.#][^.#]*)/),"")}),o=Ye(o),o=Ce(o,".","#")}var er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var rr,nr,or=Function.prototype,ir=Object.prototype,ar=or.toString,sr=ir.hasOwnProperty,ur=ar.call(Object),lr=ir.toString,cr=(rr=Object.getPrototypeOf,nr=Object,function(t){return rr(nr(t))});var fr=function(t){if(!(e=t)||"object"!=(void 0===e?"undefined":er(e))||"[object Object]"!=lr.call(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e,r=cr(t);if(null===r)return!0;var n=sr.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&ar.call(n)==ur},hr=/[|\\{}()[\]^$+*?.]/g,yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dr=new Map;function pr(t,e){var r=Object.assign({caseSensitive:!1},e),n=t+JSON.stringify(r);if(dr.has(n))return dr.get(n);var o="!"===t[0];o&&(t=t.slice(1)),t=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(hr,"\\$&")}(t).replace(/\\\*/g,".*");var i=new RegExp("^"+t+"$",r.caseSensitive?"":"i");return i.negated=o,dr.set(n,i),i}var gr=function(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Expected two arrays, got "+(void 0===t?"undefined":yr(t))+" "+(void 0===e?"undefined":yr(e)));if(0===e.length)return t;var n="!"===e[0][0];e=e.map(function(t){return pr(t,r)});var o=[],i=!0,a=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value,f=n,h=!0,y=!1,d=void 0;try{for(var p,g=e[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var m=p.value;m.test(c)&&(f=!m.negated)}}catch(t){y=!0,d=t}finally{try{!h&&g.return&&g.return()}finally{if(y)throw d}}f&&o.push(c)}}catch(t){a=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return o};gr.isMatch=function(t,e,r){var n=pr(e,r),o=n.test(t);return n.negated?!o:o};var mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br=t(function(t,e){var o,i,r,a,s,u,l,c,n,f,h,y,d,p,g,m,b,v;t.exports=(o="function"==typeof Promise,i="object"===("undefined"==typeof self?"undefined":mr(self))?self:_,r="undefined"!=typeof Symbol,a="undefined"!=typeof Map,s="undefined"!=typeof Set,u="undefined"!=typeof WeakMap,l="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,n=r&&void 0!==Symbol.iterator,f=r&&void 0!==Symbol.toStringTag,h=s&&"function"==typeof Set.prototype.entries,y=a&&"function"==typeof Map.prototype.entries,d=h&&Object.getPrototypeOf((new Set).entries()),p=y&&Object.getPrototypeOf((new Map).entries()),g=n&&"function"==typeof Array.prototype[Symbol.iterator],m=g&&Object.getPrototypeOf([][Symbol.iterator]()),b=n&&"function"==typeof String.prototype[Symbol.iterator],v=b&&Object.getPrototypeOf(""[Symbol.iterator]()),function(t){var e=void 0===t?"undefined":mr(t);if("object"!==e)return e;if(null===t)return"null";if(t===i)return"global";if(Array.isArray(t)&&(!1===f||!(Symbol.toStringTag in t)))return"Array";if("object"===("undefined"==typeof window?"undefined":mr(window))&&null!==window){if("object"===mr(window.location)&&t===window.location)return"Location";if("object"===mr(window.document)&&t===window.document)return"Document";if("object"===mr(window.navigator)){if("object"===mr(window.navigator.mimeTypes)&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"===mr(window.navigator.plugins)&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"===mr(window.HTMLElement))&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var r=f&&t[Symbol.toStringTag];if("string"==typeof r)return r;var n=Object.getPrototypeOf(t);return n===RegExp.prototype?"RegExp":n===Date.prototype?"Date":o&&n===Promise.prototype?"Promise":s&&n===Set.prototype?"Set":a&&n===Map.prototype?"Map":l&&n===WeakSet.prototype?"WeakSet":u&&n===WeakMap.prototype?"WeakMap":c&&n===DataView.prototype?"DataView":a&&n===p?"Map Iterator":s&&n===d?"Set Iterator":g&&n===m?"Array Iterator":b&&n===v?"String Iterator":null===n?"Object":Object.prototype.toString.call(t).slice(8,-1)})});function vr(t){return"string"==typeof t?0<t.length?[t]:[]:t}function _r(n,t,e){function o(t){return null!=t}function r(t){return"boolean"===br(t)}function i(t){return"string"===br(t)}function a(t){return"Object"===br(t)}var s=["any","anything","every","everything","all","whatever","whatevs"],u=Array.isArray;if(0===arguments.length)throw new Error("check-types-mini: [THROW_ID_01] Missing all arguments!");if(1===arguments.length)throw new Error("check-types-mini: [THROW_ID_02] Missing second argument!");var l=a(t)?t:{},c={ignoreKeys:[],acceptArrays:!1,acceptArraysIgnore:[],enforceStrictKeyset:!0,schema:{},msg:"check-types-mini",optsVarName:"opts"},f=void 0;if(!i((f=o(e)&&a(e)?Object.assign({},c,e):Object.assign({},c)).msg))throw new Error("check-types-mini: [THROW_ID_03] opts.msg must be string! Currently it's: "+br(f.msg)+", equal to "+JSON.stringify(f.msg,null,4));if(f.msg=f.msg.trim(),":"===f.msg[f.msg.length-1]&&(f.msg=f.msg.slice(0,f.msg.length-1)),!i(f.optsVarName))throw new Error("check-types-mini: [THROW_ID_04] opts.optsVarName must be string! Currently it's: "+br(f.optsVarName)+", equal to "+JSON.stringify(f.optsVarName,null,4));if(f.ignoreKeys=vr(f.ignoreKeys),f.acceptArraysIgnore=vr(f.acceptArraysIgnore),!u(f.ignoreKeys))throw new TypeError("check-types-mini: [THROW_ID_05] opts.ignoreKeys should be an array, currently it's: "+br(f.ignoreKeys));if(!r(f.acceptArrays))throw new TypeError("check-types-mini: [THROW_ID_06] opts.acceptArrays should be a Boolean, currently it's: "+br(f.acceptArrays));if(!u(f.acceptArraysIgnore))throw new TypeError("check-types-mini: [THROW_ID_07] opts.acceptArraysIgnore should be an array, currently it's: "+br(f.acceptArraysIgnore));if(!r(f.enforceStrictKeyset))throw new TypeError("check-types-mini: [THROW_ID_08] opts.enforceStrictKeyset should be a Boolean, currently it's: "+br(f.enforceStrictKeyset));if(Object.keys(f.schema).forEach(function(t){u(f.schema[t])||(f.schema[t]=[f.schema[t]]),f.schema[t]=f.schema[t].map(String).map(function(t){return t.toLowerCase()}).map(function(t){return t.trim()})}),f.enforceStrictKeyset)if(o(f.schema)&&0<Object.keys(f.schema).length){if(0!==Dt(Object.keys(n),Object.keys(l).concat(Object.keys(f.schema))).length)throw new TypeError(f.msg+": "+f.optsVarName+".enforceStrictKeyset is on and the following keys are not covered by schema and/or reference objects: "+JSON.stringify(Dt(Object.keys(n),Object.keys(l).concat(Object.keys(f.schema))),null,4))}else{if(!(o(l)&&0<Object.keys(l).length))throw new TypeError(f.msg+": Both "+f.optsVarName+".schema and reference objects are missing! We don't have anything to match the keys as you requested via opts.enforceStrictKeyset!");if(0!==Dt(Object.keys(n),Object.keys(l)).length)throw new TypeError(f.msg+": The input object has keys that are not covered by reference object: "+JSON.stringify(Dt(Object.keys(n),Object.keys(l)),null,4));if(0!==Dt(Object.keys(l),Object.keys(n)).length)throw new TypeError(f.msg+": The reference object has keys that are not present in the input object: "+JSON.stringify(Dt(Object.keys(l),Object.keys(n)),null,4))}Object.keys(n).forEach(function(e){if(o(f.schema)&&Object.prototype.hasOwnProperty.call(f.schema,e)){if(f.schema[e]=vr(f.schema[e]).map(String).map(function(t){return t.toLowerCase()}),!(Mt(f.schema[e],s).length||(!0===n[e]||!1===n[e]||f.schema[e].includes(br(n[e]).toLowerCase()))&&(!0!==n[e]&&!1!==n[e]||f.schema[e].includes(String(n[e]))||f.schema[e].includes("boolean")))){if(!u(n[e])||!f.acceptArrays)throw new TypeError(f.msg+": "+f.optsVarName+"."+e+" was customised to "+JSON.stringify(n[e],null,4)+" which is not among the allowed types in schema ("+f.schema[e]+") but "+br(n[e]));for(var t=0,r=n[e].length;t<r;t++)if(!f.schema[e].includes(br(n[e][t]).toLowerCase()))throw new TypeError(f.msg+": "+f.optsVarName+"."+e+" is of type "+br(n[e][t]).toLowerCase()+", but only the following are allowed in "+f.optsVarName+".schema: "+f.schema[e])}}else if(o(l)&&Object.prototype.hasOwnProperty.call(l,e)&&br(n[e])!==br(l[e])&&!f.ignoreKeys.includes(e)){if(!f.acceptArrays||!u(n[e])||f.acceptArraysIgnore.includes(e))throw new TypeError(f.msg+": "+f.optsVarName+"."+e+" was customised to "+JSON.stringify(n[e],null,4)+" which is not "+br(l[e])+" but "+br(n[e]));if(!n[e].every(function(t){return br(t)===br(l[e])}))throw new TypeError(f.msg+": "+f.optsVarName+"."+e+" was customised to be array, but not all of its elements are "+br(l[e])+"-type")}})}var wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Or=Array.isArray;function Sr(t,r){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};function n(t){return null!=t}function o(t){return"string"==typeof t}if(!n(t))throw new Error("array-pull-all-with-glob: [THROW_ID_01] first argument is missing!");if(!n(r))throw new Error("array-pull-all-with-glob: [THROW_ID_02] second argument is missing!");if(!Or(t))throw new Error("array-pull-all-with-glob: [THROW_ID_03] first argument must be an array! Currently it's "+(void 0===t?"undefined":wr(t))+", equal to: "+JSON.stringify(t,null,4));if(!Or(r))throw new Error("array-pull-all-with-glob: [THROW_ID_04] first argument must be an array! Currently it's "+(void 0===r?"undefined":wr(r))+", equal to: "+JSON.stringify(r,null,4));if(0===t.length||0===r.length)return t;if(!t.every(function(t){return o(t)}))throw new Error("array-pull-all-with-glob: [THROW_ID_05] first argument array contains non-string elements: "+JSON.stringify(t,null,4));if(!r.every(function(t){return o(t)}))throw new Error("array-pull-all-with-glob: [THROW_ID_06] first argument array contains non-string elements: "+JSON.stringify(r,null,4));if(n(e)&&!fr(e))throw new Error("array-pull-all-with-glob: [THROW_ID_07] third argument, options object is not a plain object but "+(Array.isArray(e)?"array":void 0===e?"undefined":wr(e)));var i=void 0,a={caseSensitive:!0};return _r(i=null===e?Object.assign({},a):Object.assign({},a,e),a,{msg:"newLibrary/yourFunction(): [THROW_ID_08]",optsVarName:"opts"}),Array.from(t).filter(function(e){return!r.some(function(t){return gr.isMatch(e,t,{caseSensitive:i.caseSensitive})})})}var Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir=function(t,e){if(e){if("object"!==(void 0===e?"undefined":Tr(e)))throw new TypeError(String(e)+" is not an object. Expected an object that has boolean `includeZero` property.");if("includeZero"in e){if("boolean"!=typeof e.includeZero)throw new TypeError(String(e.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(e.includeZero&&0===t)return!0}}return Number.isSafeInteger(t)&&1<=t},jr=function(t,e){if("string"!=typeof t)return!1;if(e&&"includeZero"in e){if("boolean"!=typeof e.includeZero)throw new TypeError(String(e.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(e.includeZero)return/^(-?0|[1-9]\d*)(\.0+)?$/.test(t)}return/^[1-9]\d*(\.0+)?$/.test(t)},Ar=t(function(t,e){(e=t.exports=function(t){return t+e.suffix(+t)}).suffix=function(t){return 1===Math.floor(t/10)?"th":t%10==1?"st":t%10==2?"nd":t%10==3?"rd":"th"}}),Er=(Ar.suffix,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),Wr=Array.isArray;function Rr(t,e){if(!Wr(t))throw new TypeError("ranges-sort: [THROW_ID_01] Input must be an array, consisting of range arrays! Currently its type is: "+(void 0===t?"undefined":Er(t))+", equal to: "+JSON.stringify(t,null,4));if(0===t.length)return t;var r={strictlyTwoElementsInRangeArrays:!1},n=Object.assign({},r,e);_r(n,r,{msg:"ranges-sort: [THROW_ID_02*]"});var o=void 0,i=void 0;if(n.strictlyTwoElementsInRangeArrays&&!t.every(function(t,e){return 2===t.length||(o=e,i=t.length,!1)}))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, "+Ar(o)+" range ("+JSON.stringify(t[o],null,4)+") has not two but "+i+" elements!");if(!t.every(function(t,e){return!(!Ir(t[0],{includeZero:!0})||!Ir(t[1],{includeZero:!0}))||(o=e,!1)}))throw new TypeError("ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, "+Ar(o)+" range ("+JSON.stringify(t[o],null,4)+") does not consist of only natural numbers!");return Array.from(t).sort(function(t,e){return t[0]===e[0]?t[1]<e[1]?-1:t[1]>e[1]?1:0:t[0]<e[0]?-1:1})}function kr(t){if("string"==typeof t){if(0===t.length)return"";if(""===t.trim())return t.includes("\n")?"\n":" ";var e="";if(""===t[0].trim()){for(var r=!(e=" "),n=0,o=t.length;n<o&&("\n"===t[n]&&(r=!0),""===t[n].trim());n++);r&&(e="\n")}var i="";if(""===t.slice(-1).trim()){for(var a=!(i=" "),s=t.length;s--&&("\n"===t[s]&&(a=!0),""===t[s].trim()););a&&(i="\n")}return e+t.trim()+i}return t}var Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();function Dr(t){return null!=t}var Cr=Array.isArray;function Mr(t){return"string"==typeof t}function Nr(t){return jr(t,{includeZero:!0})?parseInt(t,10):t}var Pr=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e={limitToBeAddedWhitespace:!1},r=Object.assign({},e,t);_r(r,e,{msg:"string-slices-array-push: [THROW_ID_02*]"}),this.opts=r}return xr(n,[{key:"add",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(t){throw new Error("string-slices-array-push/Slices/add(): [THROW_ID_01] Missing "+Ar(t)+" input parameter!")}(1),r=this,e=arguments[1],n=arguments[2],o=arguments.length,i=Array(3<o?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];if(0<i.length)throw new TypeError("string-slices-array-push/Slices/add(): [THROW_ID_03] Please don't overload the add() method. From the 4th input argument onwards we see these redundant arguments: "+JSON.stringify(i,null,4));if(null!==t||void 0!==e||void 0!==n){var s=jr(t,{includeZero:!0})?parseInt(t,10):t,u=jr(e,{includeZero:!0})?parseInt(e,10):e;if(Cr(t)&&!Dr(e)){var l=void 0,c=void 0;if(0<t.length){if(!t.every(function(t,e){return!!Cr(t)||(l=e,c=t,!1)}))throw new TypeError("string-slices-array-push/Slices/add(): [THROW_ID_07] first argument was given as array but it contains not only range arrays. For example, at index "+l+" we have "+(void 0===c?"undefined":Hr(c))+"-type value:\n"+JSON.stringify(c,null,4)+".");t.forEach(function(t,e){if(!Ir(Nr(t[0]),{includeZero:!0}))throw new TypeError("string-slices-array-push/Slices/add(): [THROW_ID_06] The "+Ar(e)+" ranges array's starting range index, an element at its zero'th index, is not a natural number! It's equal to: "+t[0]+".");if(!Ir(Nr(t[1]),{includeZero:!0}))throw new TypeError("string-slices-array-push/Slices/add(): [THROW_ID_05] The "+Ar(e)+" ranges array's ending range index, an element at its first index, is not a natural number! It's equal to: "+t[1]+".");if(Dr(t[2])&&!Mr(t[2]))throw new TypeError("string-slices-array-push/Slices/add(): [THROW_ID_04] The "+Ar(e)+' ranges array\'s "to add" value is not string but '+Hr(t[2])+"! It's equal to: "+t[2]+".");r.add.apply(r,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(t))})}}else{if(!Ir(s,{includeZero:!0})||!Ir(u,{includeZero:!0}))throw Ir(s,{includeZero:!0})?new TypeError('string-slices-array-push/Slices/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it\'s of a type "'+(void 0===u?"undefined":Hr(u))+'" equal to: '+JSON.stringify(u,null,4)):new TypeError('string-slices-array-push/Slices/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it\'s of a type "'+(void 0===s?"undefined":Hr(s))+'" equal to: '+JSON.stringify(s,null,4));if(Dr(n)&&!Mr(n))throw new TypeError("string-slices-array-push/Slices/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but "+(void 0===n?"undefined":Hr(n))+", equal to:\n"+JSON.stringify(n,null,4));if(void 0!==this.slices&&s===this.last()[1]){if(this.last()[1]=u,null!==this.last()[2]&&Dr(n)){var f=Dr(this.last()[2])&&0<this.last()[2].length?this.last()[2]+n:n;this.opts.limitToBeAddedWhitespace&&(f=kr(f)),this.last()[2]=f}}else this.slices||(this.slices=[]),this.slices.push(void 0!==n?[s,u,this.opts.limitToBeAddedWhitespace?kr(n):n]:[s,u])}}}},{key:"push",value:function(t,e,r){for(var n=arguments.length,o=Array(3<n?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];this.add.apply(this,[t,e,r].concat(o))}},{key:"current",value:function(){return null!=this.slices?(this.slices=function(t){if(!Array.isArray(t))return t;for(var e=Rr(t),r=e.length-1;0<r;r--)(e[r][0]<=e[r-1][0]||e[r][0]<=e[r-1][1])&&(e[r-1][0]=Math.min(e[r][0],e[r-1][0]),e[r-1][1]=Math.max(e[r][1],e[r-1][1]),void 0!==e[r][2]&&(e[r-1][0]>=e[r][0]||e[r-1][1]<=e[r][1])&&null!==e[r-1][2]&&(null===e[r][2]&&null!==e[r-1][2]?e[r-1][2]=null:void 0!==e[r-1][2]?e[r-1][2]+=e[r][2]:e[r-1][2]=e[r][2]),e.splice(r,1),r=e.length);return e}(this.slices),this.opts.limitToBeAddedWhitespace?this.slices.map(function(t){return Dr(t[2])?[t[0],t[1],kr(t[2])]:t}):this.slices):null}},{key:"wipe",value:function(){this.slices=void 0}},{key:"last",value:function(){return void 0!==this.slices&&Array.isArray(this.slices)?this.slices[this.slices.length-1]:null}}]),n}();var qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Jr,Br,Lr=Function.prototype,Zr=Object.prototype,Fr=Lr.toString,$r=Zr.hasOwnProperty,Vr=Fr.call(Object),Kr=Zr.toString,Qr=(Jr=Object.getPrototypeOf,Br=Object,function(t){return Jr(Br(t))});var zr=function(t){if(!(e=t)||"object"!=(void 0===e?"undefined":qr(e))||"[object Object]"!=Kr.call(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e,r=Qr(t);if(null===r)return!0;var n=$r.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&Fr.call(n)==Vr},Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Ur(t){if("string"==typeof t)return 0!==t.length&&(55296<=t.charCodeAt(0)&&t.charCodeAt(0)<=56319);if(void 0===t)return!1;throw new TypeError("string-character-is-astral-surrogate/isHighSurrogate(): the input is not string but "+(void 0===t?"undefined":Gr(t)))}function Xr(t){if("string"==typeof t)return 0!==t.length&&(56320<=t.charCodeAt(0)&&t.charCodeAt(0)<=57343);if(void 0===t)return!1;throw new TypeError("string-character-is-astral-surrogate/isLowSurrogate(): the input is not string but "+(void 0===t?"undefined":Gr(t)))}var Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn=Array.isArray;function en(t){return null!=t}function rn(t){return"string"==typeof t}function nn(t){return"string"==typeof t&&(55296<=t.charCodeAt(0)&&t.charCodeAt(0)<=57343)}function on(t,e,r,n){if(!(e<=t.length)){if(n.strictApi)throw new Error("string-match-left-right/marchForward(): [THROW_ID_102] second argument, fromIndexInclusive is "+e+" beyond the input string length, "+t.length+".");return!1}for(var o=r.length,i=e,a=t.length;i<a;i++){var s=t[i];if(Ur(t[i])&&Xr(t[i+1])&&(s=t[i]+t[i+1]),Xr(t[i])&&Ur(t[i-1])&&(s=t[i-1]+t[i]),!n.trimBeforeMatching||""!==t[i].trim())if(!n.i&&n.trimCharsBeforeMatching.includes(s)||n.i&&n.trimCharsBeforeMatching.map(function(t){return t.toLowerCase()}).includes(s.toLowerCase()))2===s.length&&(i+=1);else{var u=r[r.length-o];if(Ur(u)&&en(r[r.length-o+1])&&Xr(r[r.length-o+1])&&(u=r[r.length-o]+r[r.length-o+1]),!(!n.i&&s===u||n.i&&s.toLowerCase()===u.toLowerCase()))return!1;if((o-=s.length)<1){var l=i-r.length+s.length;return 0<=l&&Xr(t[l])&&en(t[l-1])&&Ur(t[l-1])&&(l-=1),0<=l?l:0}2===s.length&&Ur(t[i])&&(i+=1)}}if(0<o)return!1}function an(t,e,r,n){if(e>=t.length){if(n.strictApi)throw new Error("string-match-left-right/marchBackward(): [THROW_ID_203] second argument, starting index, should not be beyond the last character of the input string! Currently the first argument's last character's index is "+t.length+" but the second argument is beyond it:\n"+JSON.stringify(e,null,4));return!1}for(var o=r.length,i=e+1;i--;)if(!n.trimBeforeMatching||""!==t[i].trim()){var a=t[i];if(Xr(t[i])&&Ur(t[i-1])?a=t[i-1]+t[i]:Ur(t[i])&&Xr(t[i+1])&&(a=t[i]+t[i+1]),!n.i&&n.trimCharsBeforeMatching.includes(a)||n.i&&n.trimCharsBeforeMatching.map(function(t){return t.toLowerCase()}).includes(a.toLowerCase()))2===a.length&&(i-=1);else{var s=r[o-1];if(Xr(s)&&(s=""+r[o-2]+r[o-1],o-=1,i-=1),!(!n.i&&a===s||n.i&&a.toLowerCase()===s.toLowerCase()))return!1;if((o-=1)<1)return 0<=i?i:0}}if(0<o)return!1}function sn(t,e,r,n,o){var i={i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],strictApi:!0,relaxedApi:!1},a=Object.assign({},i,o);a.trimCharsBeforeMatching=vr(a.trimCharsBeforeMatching),_r(a,i,{msg:"string-match-left-right: [THROW_ID_07*]",schema:{cb:["null","undefined","function"]}}),a.trimCharsBeforeMatching=a.trimCharsBeforeMatching.map(function(t){return rn(t)?t:String(t)});var s=void 0,u=void 0;if(a.trimCharsBeforeMatching.some(function(t,e){return 1<t.length&&!nn(t)&&(s=e,u=t,!0)}))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index "+s+" is longer than 1 character, "+u.length+" (equals to "+u+"). Please split it into separate characters and put into array as separate elements.");if(!rn(e)){if(a.relaxedApi)return!1;throw new Error("string-match-left-right/"+t+"(): [THROW_ID_01] the first argument should be a string. Currently it's of a type: "+(void 0===e?"undefined":Yr(e))+", equal to:\n"+JSON.stringify(e,null,4))}if(0===e.length){if(a.relaxedApi)return!1;throw new Error("string-match-left-right/"+t+"(): [THROW_ID_02] the first argument should be a non-empty string. Currently it's empty!")}if(!Ir(r,{includeZero:!0})){if(a.relaxedApi)return!1;throw new Error("string-match-left-right/"+t+"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: "+(void 0===r?"undefined":Yr(r))+", equal to:\n"+JSON.stringify(r,null,4))}var l=void 0;if(rn(n))l=[n];else if(tn(n))l=n;else{if(en(n))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's "+(void 0===n?"undefined":Yr(n))+", equal to:\n"+JSON.stringify(n,null,4));l=[""]}if(en(o)&&!zr(o))throw new Error("string-match-left-right/"+t+"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \""+(void 0===o?"undefined":Yr(o))+'", and equal to:\n'+JSON.stringify(o,null,4));if(!en(l)||tn(l)&&en(l[0])&&0===l[0].length){if(a.cb){var c=void 0,f=r;if("matchRight"===t&&Ur(e[r])&&Xr(e[r+1])&&(f+=1),"matchLeftIncl"!==t&&"matchRight"!==t||(f+=1),t.startsWith("matchLeft")){for(var h=f;h--;)if(!Xr(e[h])||!Ur(e[h-1])){var y=e[h];if(Ur(e[h])&&Xr(e[h+1])&&(y=e[h]+e[h+1]),(!a.trimBeforeMatching||a.trimBeforeMatching&&void 0!==y&&""!==y.trim())&&(0===a.trimCharsBeforeMatching.length||void 0!==y&&!a.trimCharsBeforeMatching.includes(y))){c=h;break}Xr(e[h-1])&&Ur(e[h-2])&&(h-=1)}}else if(t.startsWith("matchRight"))for(var d=f;d<e.length;d++){var p=e[d];if(Ur(e[d])&&Xr(e[d+1])&&(p=e[d]+e[d+1]),(!a.trimBeforeMatching||a.trimBeforeMatching&&""!==p.trim())&&(0===a.trimCharsBeforeMatching.length||!a.trimCharsBeforeMatching.includes(p))){c=d;break}Ur(e[d])&&Xr(e[d+1])&&(d+=1)}if(void 0===c)return!1;var g=e[c];Ur(e[c])&&Xr(e[c+1])&&(g=e[c]+e[c+1]),Xr(e[c])&&Ur(e[c-1])&&(g=e[c-1]+e[c],c-=1);var m=c+1;return Ur(e[c])&&Xr(e[c+1])&&(m+=1),t.startsWith("matchLeft")?a.cb(g,e.slice(0,m),c):a.cb(g,e.slice(c),c)}var b="";throw en(o)||(b=" More so, the whole options object, the fourth input argument, is missing!"),new Error("string-match-left-right/"+t+'(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!'+b)}if(t.startsWith("matchLeft")){for(var v=0,_=l.length;v<_;v++){var w=r;"matchLeft"===t&&(nn(e[v-1])&&nn(e[v-2])?w-=2:w-=1);var O=an(e,w,l[v],a),S=void 0,T=void 0,I="";if(en(O)&&0<O&&(T=e[S=O-1],I=e.slice(0,O)),Xr(e[S])&&en(e[S-1])&&Ur(e[S-1])&&(T=e[(S-=1)-1]+e[S]),Ur(e[S])&&en(e[S+1])&&Xr(e[S+1])&&(T=e[S]+e[S+1],I=e.slice(0,S+2)),S<0&&(S=void 0),!1!==O&&(!a.cb||a.cb(T,I,S)))return l[v]}return!1}for(var j=0,A=l.length;j<A;j++){var E=r+("matchRight"===t?1:0);"matchRight"===t&&Ur(e[E-1])&&Xr(e[E])&&(E+=1);var W=on(e,E,l[j],a),R=void 0,k=void 0;if(en(W)&&en(e[W+l[j].length])&&(k=e[R=W+l[j].length],Ur(e[R])&&Xr(e[R+1])&&(k=e[R]+e[R+1])),!1!==W&&(!a.cb||a.cb(k,en(R)?e.slice(R):"",R)))return l[j]}return!1}function un(t,e,r,n){return sn("matchLeftIncl",t,e,r,n)}function ln(t,e,r,n){return sn("matchRightIncl",t,e,r,n)}function cn(t,e,r,n){return sn("matchRight",t,e,r,n)}var fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn=1/0,yn=9007199254740991,dn=17976931348623157e292,pn=NaN,gn="[object Arguments]",mn="[object Function]",bn="[object GeneratorFunction]",vn="[object String]",_n="[object Symbol]",wn=/^\s+|\s+$/g,On=/^[-+]0x[0-9a-f]+$/i,Sn=/^0b[01]+$/i,Tn=/^0o[0-7]+$/i,In=/^(?:0|[1-9]\d*)$/,jn=parseInt;function An(t){return t!=t}function En(e,t){return function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(t,function(t){return e[t]})}var Wn,Rn,kn=Object.prototype,Hn=kn.hasOwnProperty,xn=kn.toString,Dn=kn.propertyIsEnumerable,Cn=(Wn=Object.keys,Rn=Object,function(t){return Wn(Rn(t))}),Mn=Math.max;function Nn(t,e){var r,n,o=Jn(t)||Zn(n=r=t)&&Bn(n)&&Hn.call(r,"callee")&&(!Dn.call(r,"callee")||xn.call(r)==gn)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],i=o.length,a=!!i;for(var s in t)!e&&!Hn.call(t,s)||a&&("length"==s||qn(s,i))||o.push(s);return o}function Pn(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||kn,e!==n)return Cn(t);var e,r,n,o=[];for(var i in Object(t))Hn.call(t,i)&&"constructor"!=i&&o.push(i);return o}function qn(t,e){return!!(e=null==e?yn:e)&&("number"==typeof t||In.test(t))&&-1<t&&t%1==0&&t<e}var Jn=Array.isArray;function Bn(t){return null!=t&&("number"==typeof(n=t.length)&&-1<n&&n%1==0&&n<=yn)&&!((r=Ln(e=t)?xn.call(e):"")==mn||r==bn);var e,r,n}function Ln(t){var e=void 0===t?"undefined":fn(t);return!!t&&("object"==e||"function"==e)}function Zn(t){return!!t&&"object"==(void 0===t?"undefined":fn(t))}var Fn=function(t,e,r,n){var o,i,a,s;t=Bn(t)?t:(o=t)?En(o,Bn(i=o)?Nn(i):Pn(i)):[],r=r&&!n?(a=function(t){if(!t)return 0===t?t:0;if((t=function(t){if("number"==typeof t)return t;if("symbol"==(void 0===(e=t)?"undefined":fn(e))||Zn(e)&&xn.call(e)==_n)return pn;var e;if(Ln(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=Ln(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(wn,"");var n=Sn.test(t);return n||Tn.test(t)?jn(t.slice(2),n?2:8):On.test(t)?pn:+t}(t))===hn||t===-hn){var e=t<0?-1:1;return e*dn}return t==t?t:0}(r),s=a%1,a==a?s?a-s:a:0):0;var u,l=t.length;return r<0&&(r=Mn(l+r,0)),"string"==typeof(u=t)||!Jn(u)&&Zn(u)&&xn.call(u)==vn?r<=l&&-1<t.indexOf(e,r):!!l&&-1<function(t,e,r){if(e!=e)return function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,An,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r)},$n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Vn(t){return"string"==typeof t}var Kn=Array.isArray;function Qn(t){throw new Error("string-find-heads-tails: [THROW_ID_01*] Missing "+Ar(t)+" parameter!")}function zn(t,e,r,n){if(null!=n){if(!fr(n))throw new TypeError("string-find-heads-tails: [THROW_ID_13] the fourth input argument, Optional Options Object, must be a plain object! Currently it's: "+(void 0===n?"undefined":$n(n))+", equal to: "+n);jr(n.fromIndex,{includeZero:!0})&&(n.fromIndex=Number(n.fromIndex))}var o={fromIndex:0,throwWhenSomethingWrongIsDetected:!0,allowWholeValueToBeOnlyHeadsOrTails:!0,source:"string-find-heads-tails",matchHeadsAndTailsStrictlyInPairsByTheirOrder:!1,relaxedAPI:!1};if(_r(n=Object.assign({},o,n),o,{msg:"string-find-heads-tails: [THROW_ID_14*]"}),n.relaxedAPI||(void 0===t&&Qn(1),void 0===e&&Qn(2),void 0===r&&Qn(3)),!Vn(t)||0===t.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_02] the first input argument, input string, must be a non-zero-length string! Currently it's: "+(void 0===t?"undefined":$n(t))+", equal to: "+t)}var i=void 0,a=void 0;if(!Vn(e)&&!Kn(e)){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_03] the second input argument, heads, must be either a string or an array of strings! Currently it's: "+(void 0===e?"undefined":$n(e))+", equal to:\n"+JSON.stringify(e,null,4))}if(Vn(e)){if(0===e.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_04] the second input argument, heads, must be a non-empty string! Currently it's empty.")}e=vr(e)}else if(Kn(e)){if(0===e.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_05] the second input argument, heads, must be a non-empty array and contain at least one string! Currently it's empty.")}if(e.every(function(t,e){return a=e,Vn(i=t)})){if(!e.every(function(t,e){return a=e,Vn(t)&&0<t.length&&""!==t.trim()})){if(!n.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_07] the second input argument, heads, should not contain empty strings! For example, there's one detected at index "+a+" of heads array:\n"+JSON.stringify(e,null,4)+".");if(0===(e=e.filter(function(t){return Vn(t)&&0<t.length})).length)return[]}}else{if(!n.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_06] the second input argument, heads, contains non-string elements! For example, element at "+Ar(a)+" index is "+(void 0===i?"undefined":$n(i))+", equal to:\n"+JSON.stringify(i,null,4)+". Whole heads array looks like:\n"+JSON.stringify(e,null,4));if(0===(e=e.filter(function(t){return Vn(t)&&0<t.length})).length)return[]}}if(!Vn(r)&&!Kn(r)){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_08] the third input argument, tails, must be either a string or an array of strings! Currently it's: "+(void 0===r?"undefined":$n(r))+", equal to:\n"+JSON.stringify(r,null,4))}if(Vn(r)){if(0===r.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_09] the third input argument, tails, must be a non-empty string! Currently it's empty.")}r=vr(r)}else if(Kn(r)){if(0===r.length){if(n.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_10] the third input argument, tails, must be a non-empty array and contain at least one string! Currently it's empty.")}if(r.every(function(t,e){return a=e,Vn(i=t)})){if(!r.every(function(t,e){return a=e,Vn(t)&&0<t.length&&""!==t.trim()})){if(!n.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_12] the third input argument, tails, should not contain empty strings! For example, there's one detected at index "+a+". Whole tails array is equal to:\n"+JSON.stringify(r,null,4));if(0===(r=r.filter(function(t){return Vn(t)&&0<t.length})).length)return[]}}else{if(!n.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_11] the third input argument, tails, contains non-string elements! For example, element at "+Ar(a)+" index is "+(void 0===i?"undefined":$n(i))+", equal to:\n"+JSON.stringify(i,null,4)+". Whole tails array is equal to:\n"+JSON.stringify(r,null,4));if(0===(r=r.filter(function(t){return Vn(t)&&0<t.length})).length)return[]}}var s=n.source===o.source;if(n.throwWhenSomethingWrongIsDetected&&!n.allowWholeValueToBeOnlyHeadsOrTails){if(Fn(vr(e),t))throw new Error(n.source+(s?": [THROW_ID_16]":"")+" the whole input string can't be equal to "+(Vn(e)?"":"one of ")+"heads ("+t+")!");if(Fn(vr(r),t))throw new Error(n.source+(s?": [THROW_ID_17]":"")+" the whole input string can't be equal to "+(Vn(r)?"":"one of ")+"tails ("+t+")!")}if(!Ir(n.fromIndex,{includeZero:!0})&&!jr(n.fromIndex,{includeZero:!0}))throw new TypeError(n.source+(s?": [THROW_ID_18]":"")+" the fourth input argument must be a natural number! Currently it's: "+n.fromIndex);for(var u=e.concat(r).map(function(t){return t.charAt(0)}).reduce(function(t,e){return e.charCodeAt(0)>t[1]?[t[0],e.charCodeAt(0)]:e.charCodeAt(0)<t[0]?[e.charCodeAt(0),t[1]]:t},[e[0].charCodeAt(0),e[0].charCodeAt(0)]),l=[],c=!1,f={},h=!1,y=void 0,d=n.fromIndex,p=t.length;d<p;d++){var g=t[d].charCodeAt(0);if(g<=u[1]&&g>=u[0]){var m=ln(t,d,e);if(m&&n.matchHeadsAndTailsStrictlyInPairsByTheirOrder)for(var b=e.length;b--;)if(e[b]===m){y=b;break}if(m){if(!c){(f={}).headsStartAt=d,f.headsEndAt=d+m.length,c=!0,d+=m.length-1,h&&(h=!1);continue}if(n.throwWhenSomethingWrongIsDetected)throw new TypeError(n.source+(s?": [THROW_ID_19]":"")+' When processing "'+t+'", we found heads ('+t.slice(d,d+m.length)+') starting at character with index number "'+d+'" and there was another set of heads before it! Generally speaking, there should be "heads-tails-heads-tails", not "heads-heads-tails"!\nWe\'re talking about the area of the code:\n\n\n--------------------------------------starts\n'+t.slice(Math.max(d-200,0),d)+"\n      [33m-------\x3e[39m [31m"+t.slice(d,d+m.length)+"[39m [33m<-------[39m\n"+t.slice(d+m.length,Math.min(p,d+200))+"\n--------------------------------------ends\n\n\nTo turn off this error being thrown, set opts.throwWhenSomethingWrongIsDetected to Boolean false.")}var v=ln(t,d,r);if(c&&v&&n.matchHeadsAndTailsStrictlyInPairsByTheirOrder&&void 0!==y&&void 0!==r[y]&&r[y]!==v){for(var _=void 0,w=r.length;w--;)if(r[w]===v){_=w;break}throw new TypeError(n.source+(s?": [THROW_ID_20]":"")+' When processing "'+t+'", we had "opts.matchHeadsAndTailsStrictlyInPairsByTheirOrder" on. We found heads ('+e[y]+") but the tails the followed it were not of the same index, "+y+" ("+r[y]+") but "+_+" ("+v+").")}if(v){if(c){f.tailsStartAt=d,f.tailsEndAt=d+v.length,l.push(f),c=!(f={}),d+=v.length-1;continue}n.throwWhenSomethingWrongIsDetected&&(h=n.source+(s?": [THROW_ID_21]":"")+' When processing "'+t+'", we found tails ('+t.slice(d,d+v.length)+') starting at character with index number "'+d+"\" but there were no heads preceding it. That's very naughty!")}}if(n.throwWhenSomethingWrongIsDetected&&d===p-1){if(0!==Object.keys(f).length)throw new TypeError(n.source+(s?": [THROW_ID_22]":"")+' When processing "'+t+"\", we reached the end of the string and yet didn't find any tails ("+JSON.stringify(r,null,4)+") to match the last detected heads ("+t.slice(f.headsStartAt,f.headsEndAt)+")!");if(h)throw new Error(h)}}return l}var Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un=Array.isArray;function Xn(t,e,r){function n(t){return null!=t}var o=void 0;if(Ir(t,{includeZero:!0}))o=t;else{if(!jr(t,{includeZero:!0}))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_01] Input must mean an index, so it has to be either a natural number or a string containing natural number! Currently its type is: "+(void 0===t?"undefined":Gn(t))+", equal to: "+JSON.stringify(t,null,4));o=parseInt(t,10)}if(!n(e))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_02] We're missing the second input, rangesArr. It's meant to be an array of one or more range arrays.");if(!Un(e))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_03] Second input argument, rangesArr must be an array! Currently its type is: "+(void 0===t?"undefined":Gn(t))+", equal to: "+JSON.stringify(t,null,4));if(0===e.length)throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_04] Second input argument, rangesArr must be not empty! Currently it's empty.");var i=null;if(Un(e)&&0<e.length&&!Un(e[0]))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_05] Second input argument, rangesArr must be an array of (index range) arrays! Currently it's equal to: "+e+".");if(!e.every(function(t,e){return!(!Ir(t[0],{includeZero:!0})||!Ir(t[1],{includeZero:!0}))||(i=e,!1)}))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_06] Second input argument, rangesArr must consist of arrays which are natural number indexes representing string index ranges. However, "+Ar(i)+" range ("+JSON.stringify(e[i],null,4)+") does not consist of only natural numbers!");if(!e.every(function(t,e){return!(t[0]>t[1])||(i=e,!1)}))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_07] The "+Ar(i)+" range ("+JSON.stringify(e[i],null,4)+") in the ranges array has beginning of the index bigger than ending! They can be equal but in the backwards order.");if(n(r)&&!fr(r))throw new TypeError("ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_08] Options object must be a plain object! Currently its type is: "+(void 0===r?"undefined":Gn(r))+", equal to: "+JSON.stringify(r,null,4));var a={inclusiveRangeEnds:!1,returnMatchedRangeInsteadOfTrue:!1,skipIncomingRangeSorting:!1},s=Object.assign(Object.assign({},a),r);if(_r(s,a,{msg:"ranges-is-index-within/rangesIsIndexWithin(): [THROW_ID_07*]"}),e.length<3){if(1===e.length){var u=void 0;return u=s.inclusiveRangeEnds?o>=e[0][0]&&o<=e[0][1]:o>e[0][0]&&o<e[0][1],s.returnMatchedRangeInsteadOfTrue&&u?e[0]:u}var l=void 0,c=void 0;return s.inclusiveRangeEnds?(l=o>=e[0][0]&&o<=e[0][1],c=o>=e[1][0]&&o<=e[1][1]):(l=o>e[0][0]&&o<e[0][1],c=o>e[1][0]&&o<e[1][1]),s.returnMatchedRangeInsteadOfTrue&&(l||c)?l?e[0]:e[1]:l||c}var f=s.skipIncomingRangeSorting?e:Rr(e);if(o<f[0][0]||o>f[f.length-1][1])return!1;if(o===f[0][0])return!!s.inclusiveRangeEnds&&(!s.returnMatchedRangeInsteadOfTrue||f[0]);if(o===f[f.length-1][1])return!!s.inclusiveRangeEnds&&(!s.returnMatchedRangeInsteadOfTrue||f[f.length-1]);for(var h=0,y=f.length-1,d=Math.floor((y+h)/2);1<Math.floor(y-h)&&0!==d;)if(o<f[d=Math.floor((y+h)/2)][0])y=d;else{if(!(o>f[d][1]))return o===f[d][0]||o===f[d][1]?!!s.inclusiveRangeEnds&&(!s.returnMatchedRangeInsteadOfTrue||f[d]):!s.returnMatchedRangeInsteadOfTrue||f[d];h=d}var p=void 0,g=void 0;return s.inclusiveRangeEnds?(p=o>=e[h][0]&&o<=e[h][1],g=o>=e[y][0]&&o<=e[y][1]):(p=o>e[h][0]&&o<e[h][1],g=o>e[y][0]&&o<e[y][1]),s.returnMatchedRangeInsteadOfTrue&&(p||g)?p?e[h]:e[y]:p||g}var Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},to=Array.isArray;function eo(a,r){if(0===arguments.length)throw new Error("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_01] inputs missing!");if("string"!=typeof a)throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_02] first input argument must be a string! Currently it's: "+(void 0===a?"undefined":Yn(a))+", equal to: "+a);if(!to(r))throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_03] second input argument must be an array! Currently it's: "+(void 0===r?"undefined":Yn(r))+", equal to: "+r);if(to(r)&&(Ir(r[0],{includeZero:!0})||jr(r[0],{includeZero:!0}))&&(Ir(r[1],{includeZero:!0})||jr(r[1],{includeZero:!0}))&&(r=[r]),r.forEach(function(t,e){if(!to(t))throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_05] ranges array, second input arg., has "+Ar(e)+" element not an array: "+JSON.stringify(t,null,4)+", which is "+(void 0===t?"undefined":Yn(t)));if(!Ir(t[0],{includeZero:!0})){if(!jr(t[0],{includeZero:!0}))throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_06] ranges array, second input arg. has "+Ar(e)+" element, array ["+t[0]+","+t[1]+"]. That array has first element not an integer, but "+Yn(t[0])+", equal to: "+JSON.stringify(t[0],null,4)+". Computer doesn't like this.");r[e][0]=Number.parseInt(r[e][0],10)}if(!Ir(t[1],{includeZero:!0})){if(!jr(t[1],{includeZero:!0}))throw new TypeError("string-replace-slices-array/replaceSlicesArr(): [THROW_ID_07] ranges array, second input arg. has "+Ar(e)+" element, array ["+t[0]+","+t[1]+"]. That array has second element not an integer, but "+Yn(t[1])+", equal to: "+JSON.stringify(t[1],null,4)+". Computer doesn't like this.");r[e][1]=Number.parseInt(r[e][1],10)}}),0<r.length){var t=a.slice(r[r.length-1][1]);a=r.reduce(function(t,e,r,n){var o=0===r?0:n[r-1][1],i=n[r][0];return t+a.slice(o,i)+(null!=n[r][2]?n[r][2]:"")},""),a+=t}return a}var ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var no,oo,io=Function.prototype,ao=Object.prototype,so=io.toString,uo=ao.hasOwnProperty,lo=so.call(Object),co=ao.toString,fo=(no=Object.getPrototypeOf,oo=Object,function(t){return no(oo(t))});var ho=function(t){if(!(e=t)||"object"!=(void 0===e?"undefined":ro(e))||"[object Object]"!=co.call(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e,r=fo(t);if(null===r)return!0;var n=uo.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&so.call(n)==lo},yo=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function go(t,e){function r(t,e,r){return t.charCodeAt(0)>=e&&t.charCodeAt(0)<=r}function n(t){return"<"===t||""===t.trim()}if("string"!=typeof t)throw new Error("string-collapse-white-space/collapse(): [THROW_ID_01] The input is not string but "+(void 0===t?"undefined":po(t))+", equal to: "+JSON.stringify(t,null,4));if(null!=e&&!ho(e))throw new Error("string-collapse-white-space/collapse(): [THROW_ID_02] The opts is not a plain object but "+(void 0===e?"undefined":po(e))+", equal to:\n"+JSON.stringify(e,null,4));if(0===t.length)return"";var o=new Pr,i={trimStart:!0,trimEnd:!0,trimLines:!1,trimnbsp:!1,recogniseHTML:!0,removeEmptyLines:!1,returnRangesOnly:!1},a=Object.assign({},i,e);_r(a,i,{msg:"string-collapse-white-space/collapse(): [THROW_ID_03*]"});var s=void 0;a.recogniseHTML&&(s=new Pr);var u=null,l=null,c=null,f=!1,h=!1,y=null,d=!1,p=!1,g=void 0,m=!1,b=!1;a.recogniseHTML&&(g={equalDoubleQuoteCombo:0,equalOnly:0,doubleQuoteOnly:0,spacesBetweenLetterChunks:0,linebreaks:0});for(var v=void 0,_=t.length;_--;){if(" "===t[_]?null===u&&(u=_):null!==u&&(_+1!==u&&o.add(_+1,u),u=null),""===t[_].trim()&&(!a.trimnbsp&&""!==t[_]||a.trimnbsp)){if(null===l&&(l=_),"\n"!==t[_]&&"\r"!==t[_]&&null===c&&(c=_+1),"\n"!==t[_]&&"\r"!==t[_]||(null!==c&&(a.trimLines&&o.add(_+1,c),c=null),"\n"!==t[_-1]&&"\r"!==t[_-1]&&(c=_,f=!0)),"\n"===t[_]){var w=_+1,O=v+1;a.removeEmptyLines&&void 0!==v&&""===t.slice(w,O).trim()&&o.add(_+1,v+1),v=_}}else null!==l&&(_+1!==l+1&&l===t.length-1&&a.trimEnd&&o.add(_+1,l+1),l=null),null!==c&&(f&&a.trimLines&&(f=!1,o.add(_+1,c)),c=null);if(0===_&&(null!==l&&a.trimStart?o.add(0,l+1):null!==u&&o.add(_+1,u+1)),a.recogniseHTML)if(""===t[_].trim()){if(h&&!p&&(p=!0),d&&!y&&(y=_+1),d&&void 0!==t[_-1]&&""!==t[_-1].trim()&&"<"!==t[_-1]&&"/"!==t[_-1]&&(h=d=!1,s.wipe()),!m&&!b&&""===t[_].trim()&&"<"!==t[_-1]&&(void 0===t[_+1]||""!==t[_+1].trim()&&"/"!==t[_+1].trim()))if(void 0===t[_-1]||""!==t[_-1].trim()&&"<"!==t[_-1]&&"/"!==t[_-1])g.spacesBetweenLetterChunks+=1;else for(var S=_-1;S--;)if(""!==t[S].trim()){"<"===t[S]?m=!0:"/"!==t[S]&&(g.spacesBetweenLetterChunks+=_-S);break}}else"="===t[_]?(g.equalOnly+=1,'"'===t[_+1]&&(g.equalDoubleQuoteCombo+=1)):'"'===t[_]&&(g.doubleQuoteOnly+=1),b&&(b=!1),null!==y&&(s.add(_+1,y),y=null),">"===t[_]?(g={equalDoubleQuoteCombo:0,equalOnly:0,doubleQuoteOnly:0,spacesBetweenLetterChunks:0,linebreaks:0},b=!0,h?s.wipe():(h=!0,void 0===t[_-1]||""!==t[_-1].trim()||y||(y=_)),p||(p=!0)):"<"===t[_]?(h=!1,m&&(m=!1),0<g.spacesBetweenLetterChunks&&0===g.equalDoubleQuoteCombo&&(d=!1,s.wipe()),d&&s.current()&&(s.current().forEach(function(t){var e=yo(t,2),r=e[0],n=e[1];return o.add(r,n)}),d=!1),g={equalDoubleQuoteCombo:0,equalOnly:0,doubleQuoteOnly:0,spacesBetweenLetterChunks:0,linebreaks:0}):h&&"/"===t[_]?y=_:h&&!d&&(p&&r(t[_],97,122)?(p=!1,r(t[_],97,110)?("a"===t[_]&&("e"===t[_-1]&&un(t,_,["area","textarea"],{cb:n,i:!0})||"t"===t[_-1]&&un(t,_,["data","meta"],{cb:n,i:!0})||n(t[_-1]))||"b"===t[_]&&(un(t,_,["rb","sub"],{cb:n,i:!0})||n(t[_-1]))||"c"===t[_]&&un(t,_,"rtc",{cb:n,i:!0})||"d"===t[_]&&("a"===t[_-1]&&un(t,_,["head","thead"],{cb:n,i:!0})||un(t,_,["kbd","dd","embed","legend","td"],{cb:n,i:!0}))||"e"===t[_]&&(un(t,_,"source",{cb:n,i:!0})||"d"===t[_-1]&&un(t,_,["aside","code"],{cb:n,i:!0})||"l"===t[_-1]&&un(t,_,["table","article","title","style"],{cb:n,i:!0})||"m"===t[_-1]&&un(t,_,["iframe","time"],{cb:n,i:!0})||"r"===t[_-1]&&un(t,_,["pre","figure","picture"],{cb:n,i:!0})||"t"===t[_-1]&&un(t,_,["template","cite","blockquote"],{cb:n,i:!0})||un(t,_,"base",{cb:n,i:!0})||n(t[_-1]))||"g"===t[_]&&un(t,_,["img","strong","dialog","svg"],{cb:n,i:!0})||"h"===t[_]&&un(t,_,["th","math"],{cb:n,i:!0})||"i"===t[_]&&(un(t,_,["bdi","li"],{cb:n,i:!0})||n(t[_-1]))||"k"===t[_]&&un(t,_,["track","link","mark"],{cb:n,i:!0})||"l"===t[_]&&un(t,_,["html","ol","ul","dl","label","del","small","col"],{cb:n,i:!0})||"m"===t[_]&&un(t,_,["param","em","menuitem","form"],{cb:n,i:!0})||"n"===t[_]&&("o"===t[_-1]&&un(t,_,["section","caption","figcaption","option","button"],{cb:n,i:!0})||un(t,_,["span","keygen","dfn","main"],{cb:n,i:!0})))&&(d=!0):("o"===t[_]&&un(t,_,["bdo","video","audio"],{cb:n,i:!0})||"p"===t[_]&&(n(t[_-1])||"u"===t[_-1]&&un(t,_,["hgroup","colgroup","optgroup","sup"],{cb:n,i:!0})||un(t,_,["map","samp","rp"],{cb:n,i:!0}))||"q"===t[_]&&n(t[_-1])||"r"===t[_]&&("e"===t[_-1]&&un(t,_,["header","meter","footer"],{cb:n,i:!0})||un(t,_,["var","br","abbr","wbr","hr","tr"],{cb:n,i:!0}))||"s"===t[_]&&("s"===t[_-1]&&un(t,_,["address","progress"],{cb:n,i:!0})||un(t,_,["canvas","details","ins"],{cb:n,i:!0})||n(t[_-1]))||"t"===t[_]&&("c"===t[_-1]&&un(t,_,["object","select"],{cb:n,i:!0})||"o"===t[_-1]&&un(t,_,["slot","tfoot"],{cb:n,i:!0})||"p"===t[_-1]&&un(t,_,["script","noscript"],{cb:n,i:!0})||"u"===t[_-1]&&un(t,_,["input","output"],{cb:n,i:!0})||un(t,_,["fieldset","rt","datalist","dt"],{cb:n,i:!0}))||"u"===t[_]&&(n(t[_-1])||un(t,_,"menu",{cb:n,i:!0}))||"v"===t[_]&&un(t,_,["nav","div"],{cb:n,i:!0})||"y"===t[_]&&un(t,_,["ruby","body","tbody","summary"],{cb:n,i:!0}))&&(d=!0)):p&&r(t[_],49,54)?(p=!1,"h"!==t[_-1]||"<"!==t[_-2]&&""!==t[_-2].trim()||(d=!0)):"="!==t[_]&&'"'!==t[_]||(p=!1))}return a.returnRangesOnly?o.current():o.current()?eo(t,o.current()):t}var mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function bo(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var vo=Array.isArray;return function(y,d){function t(t){return/[.#\-_A-Za-z0-9]/.test(t)}function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(t){return null!=t}function n(t){return"string"==typeof t}var p=void 0,g=void 0,o=0,i=0,a=[],s=[],u=[],l=0,c=0,f=0,h=0,m=0,b=0,v=0,_=0,w=null,O=0,S=!1,T=!1,I=/[\n]?\s*@media[^{]*{\s*}/g,j=new Pr,A=["media","supports","document"],E=["charset","page","font-face","keyframes","namespace","import","viewport","counter-style","font-feature-values"],W=["{","(","<",'"',"'","@",";"];if("string"!=typeof y)throw new TypeError("email-remove-unused-css: [THROW_ID_01] Input must be string! Currently it's "+(void 0===y?"undefined":mo(y)));if(!fr(d)){if(null!=d)throw new TypeError("email-remove-unused-css: [THROW_ID_02] Options, second input argument, must be a plain object! Currently it's "+(void 0===d?"undefined":mo(d))+", equal to: "+JSON.stringify(d,null,4));d={}}if(fr(d)&&e(d,"backend")&&function t(e){var r=void 0,n=void 0,o=!0;if(Array.isArray(e)){if(0===e.length)return!0;for(r=0,n=e.length;r<n;r++){if(null===(o=t(e[r])))return null;if(!o)return!1}}else if(fr(e)){if(0===Object.keys(e).length)return!0;for(r=0,n=Object.keys(e).length;r<n;r++){if(null===(o=t(e[Object.keys(e)[r]])))return null;if(!o)return!1}}else{if("string"!=typeof e)return null;if(0!==e.length)return!1}return o}(d.backend)&&(d.backend=[]),n((d=Object.assign({},{whitelist:[],backend:[]},d)).whitelist)&&(d.whitelist=[d.whitelist]),!vo(d.whitelist))throw new TypeError("email-remove-unused-css: [THROW_ID_03] opts.whitelist should be an array, but it was customised to a wrong thing, "+JSON.stringify(d.whitelist,null,4));if(0<d.whitelist.length&&!d.whitelist.every(function(t){return n(t)}))throw new TypeError("email-remove-unused-css: [THROW_ID_04] opts.whitelist array should contain only string-type elements. Currently we\ve got:\n"+JSON.stringify(d.whitelist,null,4));if(!vo(d.backend))throw new TypeError("email-remove-unused-css: [THROW_ID_05] opts.backend should be an array, but it was customised to a wrong thing, "+JSON.stringify(d.backend,null,4));if(0<d.backend.length&&d.backend.some(function(t){return!fr(t)}))throw new TypeError("email-remove-unused-css: [THROW_ID_06] opts.backend array should contain only plain objects but it contains something else:\n"+JSON.stringify(d.backend,null,4));if(0<d.backend.length&&!d.backend.every(function(t){return e(t,"heads")&&e(t,"tails")}))throw new TypeError('email-remove-unused-css: [THROW_ID_07] every object within opts.backend should contain keys "heads" and "tails" but currently it\'s not the case. Whole "opts.backend" value array is currently equal to:\n'+JSON.stringify(d.backend,null,4));var R=[];0<d.backend.length&&(R=zn(y,d.backend.map(function(t){return t.heads}),d.backend.map(function(t){return t.tails}),{source:"email-remove-unused-css: [THROW_ID_09]"}).map(function(t){return[t.headsStartAt,t.tailsEndAt-1]}));var k=!1,H=!1,x=null,D=void 0;t:for(p=0,g=y.length;p<g;p++){var C=y[p];if("\n"!==C&&"\r"!==C||k&&(k=!1),H&&(null===x||"string"!=typeof x||"string"==typeof x&&0===x.length?H=!1:ln(x,0,C)&&(x=null,H=!1)),!H&&""+y[p]+y[p+1]+y[p+2]+y[p+3]+y[p+4]+y[p+5]=="<style"){S=!0;for(var M=p;M<g;M++)if(">"===y[M]){o=M+1;break}}if(H||""+y[p]+y[p+1]+y[p+2]+y[p+3]+y[p+4]+y[p+5]!="/style"||(S=!1,i=p-1),null!==w&&"*"===y[p]&&"/"===y[p+1]&&(j.push(w,p+2),w=null,H=!1),o<=p&&(!i||i<o)&&"/"===y[p]&&"*"===y[p+1]&&!w&&(w=p,H=!0),!H&&"@"===y[p]){var N=cn(y,p,A)||cn(y,p,E);if(N)for(var P=void 0,q=p+1;q<g;q++)if(P&&y[q]===P){if("}"===y[q]&&E.includes(N)||"{"===y[q]&&A.includes(N)){p=q+1;continue t}P=void 0}else if('"'!==y[q]||P?"'"!==y[q]||P?"("!==y[q]||P?E.includes(N)&&"{"===y[q]&&!P&&(P="}"):P=")":P="'":P='"',W.includes(y[q])&&!P){var J=void 0,B=void 0;"{"===y[q]?T=!1:"@"!==y[q]&&"<"!==y[q]&&";"!==y[q]||y.slice(p,q).includes("{")||y.slice(p,q).includes("(")||y.slice(p,q).includes('"')||y.slice(p,q).includes("'")||(J=p,B=q+(";"===y[q]?1:0),j.push(J,B));var L=B?B-1:q-1+("{"===y[q]?1:0);p=L;continue t}}if(!H&&S&&"}"===C&&(T=!1),H||"{"!==C||!S||T||(T=!0),H||"'"!==C&&'"'!==C||k&&(H=!(k=!1),x=C),!H&&!w&&o&&o<=p&&(0===i&&o<=p||i<o&&o<p)&&("."===C||"#"===C)&&O<=p&&!T){S=!0;for(var Z=l=p;Z<g;Z++)if(!t(y[Z])){a.push(y.slice(l,Z)),p=O=Z;break}}if(!H&&"<"===y[p]&&cn(y,p,"body",{i:!0,trimBeforeMatching:!0,cb:function(t,e,r){if(void 0!==t&&(""===t.trim()||">"===t)){if(!(5<r-p))return!0;j.push(p,r,"<body")}return!0}}))for(var F=p;F<g;F++)if(">"===y[F]){h=F+1;break}H||0===h||""+y[p]+y[p+1]+y[p+2]+y[p+3]+y[p+4]+y[p+5]+y[p+6]!='class="'||" "!==y[p-1]&&'"'!==y[p-1]||(c=p+6),H||0===h||""+y[p]+y[p+1]+y[p+2]+y[p+3]!='id="'||" "!==y[p-1]&&'"'!==y[p-1]||(f=p+3),!H&&0!==c&&'"'===C&&c<p&&(c=0),!H&&0!==f&&'"'===C&&f<p&&(f=0),!H&&c&&c<p&&t(C)&&0===m&&(m=p),!H&&0!==m&&m<p&&(!t(C)||d.backend.length&&R&&R.length&&Xn(p,R,{inclusiveRangeEnds:!0,returnMatchedRangeInsteadOfTrue:!0}))&&(s.push("."+y.slice(m,p)),m=0),!H&&f&&f<p&&t(C)&&0===v&&(v=p),!H&&0!==v&&v<p&&(!t(C)||d.backend.length&&R&&R.length&&Xn(p,R,{inclusiveRangeEnds:!0,returnMatchedRangeInsteadOfTrue:!0}))&&(u.push("#"+y.slice(v,p)),v=0),d.backend.length&&R&&R.length&&(D=Xn(p,R,{inclusiveRangeEnds:!0,returnMatchedRangeInsteadOfTrue:!0}))&&(p=D[1])}var $=Ct(s.concat(u).sort()),V={};a.forEach(function(t){tr(t).forEach(function(t){Object.prototype.hasOwnProperty.call(V,t)?V[t]+=1:V[t]=1})});for(var K=Object.assign({},V),Q=Ct(a.reduce(function(t,e){return t.concat(tr(e))},[])).sort(),z=Array.from(a),G=[],U=0,X=z.length;U<X;U++){var Y,tt=void 0;r(z[U])&&(tt=tr(z[U])),tt.every(function(t){return $.includes(t)})||((Y=G).push.apply(Y,bo(tr(z[U]))),z.splice(U,1),U-=1,X-=1)}G=Ct(Sr(G,d.whitelist));var et=void 0;et=0<z.length?z.reduce(function(t,e){return t.concat(tr(e))},[]):[];var rt=Sr(Dt(Ct(Array.from(Q)),s.concat(u)),d.whitelist),nt=Ct(Sr(Dt(s.concat(u),et),d.whitelist));rt=Ct(rt.concat(Mt(G,nt))).sort();var ot=nt.filter(function(t){return t.startsWith(".")}).map(function(t){return t.slice(1)}),it=nt.filter(function(t){return t.startsWith("#")}).map(function(t){return t.slice(1)});j.current()&&(y=eo(y,j.current()),j.wipe());var at=void(i=o=0),st=!1,ut=!1;t:for(p=0,g=y.length;p<g;p++){var lt=y[p];if(""+y[p]+y[p+1]+y[p+2]+y[p+3]+y[p+4]+y[p+5]=="<style"){for(var ct=p;ct<g;ct++)if(">"===y[ct]){o=ct+1;break}st=!0}if(""+y[p+1]+y[p+2]+y[p+3]+y[p+4]+y[p+5]+y[p+6]=="/style"&&(i=p,st=!1),!H&&"@"===y[p]){var ft=cn(y,p,A)||cn(y,p,E);if(ft)for(var ht=void 0,yt=p+1;yt<g;yt++)if(ht&&y[yt]===ht){if("}"===y[yt]&&E.includes(ft)||"{"===y[yt]&&A.includes(ft)){p=yt+1;continue t}ht=void 0}else if('"'!==y[yt]||ht?"'"!==y[yt]||ht?"("!==y[yt]||ht?E.includes(ft)&&"{"===y[yt]&&!ht&&(ht="}"):ht=")":ht="'":ht='"',W.includes(y[yt])&&!ht){var dt=void 0,pt=void 0;"{"===y[yt]?T=!1:"@"!==y[yt]&&"<"!==y[yt]&&";"!==y[yt]||y.slice(p,yt).includes("{")||y.slice(p,yt).includes("(")||y.slice(p,yt).includes('"')||y.slice(p,yt).includes("'")||(dt=p,pt=yt+(";"===y[yt]?1:0),j.push(dt,pt));var gt=pt?pt-1:yt-1+("{"===y[yt]?1:0);p=gt;continue t}}"{"===y[p]&&st&&!ut&&(ut=!0),st&&ut&&"}"===y[p]&&(ut=!1);var mt=!1;if(o&&o<=p&&(0===i&&o<=p||i<o&&o<p)&&("."===lt||"#"===lt)&&!ut){at=!0;for(var bt=void 0,vt=null,_t=p-1;0<_t;_t--){if(">"===y[_t]||"{"===y[_t]||"}"===y[_t]||";"===y[_t]){vt<(bt=_t+1)&&(vt=bt);break}""===y[_t].trim()?vt||(vt=_t+1):vt=null}for(var wt=void 0,Ot=void 0,St=void 0,Tt=p;Tt<g;Tt++){if("{"===y[Tt]&&(St=!0),"}"===y[Tt]){Ot=Tt+1,mt=St=!1;break}if("{"===y[Tt]||","===y[Tt]&&!St){var It=void 0;if(wt=Tt,mt||","!==y[Tt]){if("{"===y[Tt])for(var jt=Tt-1;0<jt;jt--)if(""!==y[jt].trim()){wt=jt+1;break}0<Mt(tr(y.slice(vt,wt)),rt).length&&void 0!==vt&&void 0!==wt?(tr(y.slice(vt,wt)).forEach(function(t){Object.prototype.hasOwnProperty.call(K,t)&&(K[t]-=1)}),j.push(vt,wt)):at=!1,It=wt}else{mt=!0;for(var At=(It=Tt)+1;At<g;At++)if(""!==y[At].trim()){wt=At-1;break}0<Mt(tr(y.slice(vt,wt+1)),rt).length&&void 0!==vt&&wt+1!==void 0?(tr(y.slice(vt,wt+1)).forEach(function(t){Object.prototype.hasOwnProperty.call(K,t)&&(K[t]-=1)}),j.push(vt,wt+1)):at=!1}p=Tt-1,","===y[Tt]&&(vt=It)}}at&&void 0!==bt&&void 0!==Ot&&j.push(bt,Ot),p=Ot-1}}var Et=Object.keys(K).filter(function(t){return K[t]<1});for(ot=Ct(ot.concat(Mt(Sr($,d.whitelist),Et).filter(function(t){return"."===t[0]}).map(function(t){return t.slice(1)}))),nt=Ct(nt.concat(ot.map(function(t){return"."+t}))).sort(),p=y.indexOf("<body"),g=y.length;p<g;p++){if(""+y[p]+y[p+1]+y[p+2]+y[p+3]+y[p+4]+y[p+5]+y[p+6]=='class="'&&(" "===y[p-1]||'"'===y[p-1])){for(var Wt=void 0,Rt=m=p+7;Rt<g;Rt++)if('"'===y[Rt]){b=Rt;break}var kt=Dt(y.slice(m,b).split(" "),[""]).map(function(t){return t.trim()}),Ht=Dt(Array.from(kt),ot);if(Ht=0<Ht.length?' class="'+Ht.join(" ")+'"':"",0<Mt(kt,ot).length||""===Ht){for(var xt=p-1;0<xt;xt--)if(" "!==y[xt]){Wt=xt+1;break}void 0!==Wt&&b+1!==void 0&&j.push(Wt,b+1,Ht)}}""+y[p]+y[p+1]+y[p+2]+y[p+3]!='id="'||" "!==y[p-1]&&'"'!==y[p-1]||function(){for(var t=void 0,e=v=p+4;e<g;e++)if('"'===y[e]){_=e;break}var n=y.slice(v,_),r=d.backend.map(function(t){return t.heads}),o=d.backend.map(function(t){return t.tails}),i=void 0,a=void 0;0<r.length&&0<o.length&&(i=zn(n,r,o,{source:"email-remove-unused-css: [THROW_ID_10]"}),a=i.reduce(function(t,e){return t.push([e.headsStartAt,e.tailsEndAt]),t},[]));for(var s=new Pr,u=function(e,t){var r=ln(n,e,it,{cb:function(t){return"string"==typeof t&&(""===t.trim()||a.length&&!Xn(e,a,{inclusiveRangeEnds:!0}))||void 0===t}});r&&s.push(e,e+r.length)},l=0,c=n.length;l<c;l++)u(l);s.current()&&(n=eo(n,s.current()));var f="";""!==n.trim()&&(f=' id="'+go(n,{recogniseHTML:!1})+'"');for(var h=p-1;0<h;h--)if(" "!==y[h]){t=h+1;break}j.push(t,_+1,f)}()}for(r(j.current())&&(y=eo(y,j.current()));I.test(y);)y=y.replace(I,"");return{result:y=(y=(y=(y=(y=y.replace(/[\n]?\s*<style[^>]*>\s*<\/style\s*>/g,"\n")).replace(/<!(--)?\[if[^\]]*]>[<>!-\s]*<!\[endif\]\1>/gi,"")).replace("\n\n","\n")).replace(/[ ]*\n/g,"\n")).replace(/\n\s*\n/gi,"\n").trim()+"\n",allInHead:Q,allInBody:$,deletedFromHead:Ct(Object.keys(K).filter(function(t){return 0===K[t]})).sort(),deletedFromBody:nt.sort()}}});
